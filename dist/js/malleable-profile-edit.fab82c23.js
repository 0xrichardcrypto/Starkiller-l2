(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["malleable-profile-edit"],{b619:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("edit-page-top",{attrs:{breads:e.breads,"show-submit":!0,"show-copy":!0,"show-delete":!e.canEdit,"submit-loading":e.loading,"copy-link":e.copyLink},on:{submit:e.submit,delete:e.deleteMalleableProfile}}),r("div",{staticClass:"headers"},[r("h3",[e._v(e._s(e.mode)+" Malleable Profile")])]),e.errorState?r("error-state-alert",{attrs:{"resource-id":e.id,"resource-type":"malleableProfile"}}):r("v-card",{staticStyle:{padding:"10px"}},[r("v-form",{ref:"form",staticStyle:{"max-width":"500px"},nativeOn:{submit:function(t){return t.preventDefault(),e.submit.apply(null,arguments)}},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[r("v-text-field",{attrs:{rules:e.rules["name"],label:"name",outlined:"",dense:"",required:"",disabled:!e.isNew},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),r("v-text-field",{attrs:{rules:e.rules["category"],label:"category",outlined:"",dense:"",required:"",disabled:!e.isNew},model:{value:e.form.category,callback:function(t){e.$set(e.form,"category",t)},expression:"form.category"}}),r("v-textarea",{attrs:{rules:e.rules["code"],label:"code",outlined:"",dense:"",required:"","auto-grow":""},model:{value:e.form.data,callback:function(t){e.$set(e.form,"data",t)},expression:"form.data"}})],1)],1)],1)},n=[],i=r("5530"),o=r("1da1"),l=(r("96cf"),r("b0c0"),r("2b0e")),s=r("6bbe"),u=r("1dc0"),c=r("c916"),d={name:"MalleableProfileEdit",components:{ErrorStateAlert:s["a"],EditPageTop:u["a"]},data:function(){return{form:{},rules:{name:[function(e){return!!e||"Name is required"},function(e){return!!e&&e.length>3||"Name must be larger than 3 characters"}],category:[function(e){return!!e||"Category is required"}],code:[function(e){return!!e||"Code is required"}]},profile:{},valid:!0,loading:!1,errorState:!1}},computed:{breads:function(){return[{text:"Malleable Profiles",disabled:!1,to:"/malleable-profiles",exact:!0},{text:this.id&&!this.isCopy?"".concat(this.id):"New",disabled:!0,to:"/malleable-profiles-edit"}]},isNew:function(){return"malleableProfileNew"===this.$route.name},isCopy:function(){return!0===this.$route.params.copy},mode:function(){return this.isCopy?"Copy":this.isNew?"New":"View"},canEdit:function(){return this.isNew},id:function(){return this.$route.params.id},copyLink:function(){return this.canEdit?{}:{name:"malleableProfileNew",params:{copy:!0,id:this.id}}}},mounted:function(){this.isNew&&!this.isCopy||this.getMalleableProfile(this.id)},methods:{submit:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.loading&&e.$refs.form.validate()){t.next=2;break}return t.abrupt("return");case 2:if(e.loading=!0,!e.isNew){t.next=8;break}return t.next=6,e.create();case 6:t.next=10;break;case 8:return t.next=10,e.update();case 10:e.loading=!1;case 11:case"end":return t.stop()}}),t)})))()},create:function(){var e=this;return c["a"](this.form.name,this.form.category,this.form.data).then((function(){return e.$router.push({name:"malleableProfileEdit",params:{id:e.form.name}})})).catch((function(t){return e.$snack.error("Error: ".concat(t))}))},update:function(){var e=this;return c["e"](this.form.name,this.form.data).then((function(){return e.$router.push({name:"malleableProfiles"})})).catch((function(t){return e.$snack.error("Error: ".concat(t))}))},getMalleableProfile:function(e){var t=this;c["c"](e).then((function(e){t.malleableProfile=e,l["default"].set(t,"form",Object(i["a"])({},e))})).catch((function(){t.errorState=!0}))},deleteMalleableProfile:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$root.$confirm("Delete","Are you sure you want to delete profile ".concat(e.form.name,"?"),{color:"red"});case 2:if(!t.sent){t.next=12;break}return t.prev=3,t.next=6,e.$store.dispatch("malleable/deleteMalleableProfile",e.form.name);case 6:e.$router.push({name:"malleableProfiles"}),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](3),e.$snack.error("Error: ".concat(t.t0));case 12:case"end":return t.stop()}}),t,null,[[3,9]])})))()}}},f=d,m=r("2877"),b=r("6544"),p=r.n(b),h=r("b0af"),v=r("4bd4"),w=r("8654"),x=r("a844"),g=Object(m["a"])(f,a,n,!1,null,null,null);t["default"]=g.exports;p()(g,{VCard:h["a"],VForm:v["a"],VTextField:w["a"],VTextarea:x["a"]})}}]);
//# sourceMappingURL=malleable-profile-edit.fab82c23.js.map