{"version":3,"sources":["webpack:///./src/views/BypassEdit.vue?1a6c","webpack:///src/views/BypassEdit.vue","webpack:///./src/views/BypassEdit.vue?716e","webpack:///./src/views/BypassEdit.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","breads","initialLoad","canEdit","id","loading","copyLink","on","submit","deleteBypass","staticClass","_v","_s","mode","staticStyle","ref","nativeOn","$event","preventDefault","apply","arguments","model","value","callback","$$v","valid","expression","rules","isNew","form","$set","staticRenderFns","name","components","ErrorStateAlert","EditPageTop","data","code","bypass","errorState","computed","$route","isCopy","params","copy","breadcrumbName","watch","val","getBypass","mounted","methods","component","VCard","VForm","VTextField","VTextarea"],"mappings":"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","file":"js/bypass-edit.3af0cc05.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('edit-page-top',{attrs:{\"breads\":_vm.breads,\"show-submit\":_vm.initialLoad,\"disable-submit\":!_vm.canEdit && _vm.initialLoad,\"show-copy\":_vm.id > 0 && _vm.initialLoad,\"show-delete\":_vm.id > 0 && _vm.initialLoad,\"submit-loading\":_vm.loading && _vm.initialLoad,\"copy-link\":_vm.copyLink,\"small-copy\":true,\"small-delete\":true},on:{\"submit\":_vm.submit,\"delete\":_vm.deleteBypass}}),_c('div',{staticClass:\"headers\"},[_c('h3',[_vm._v(_vm._s(_vm.mode)+\" Bypass\")])]),(_vm.errorState)?_c('error-state-alert',{attrs:{\"resource-id\":_vm.id,\"resource-type\":\"bypass\"}}):_c('v-card',{staticStyle:{\"padding\":\"10px\"}},[_c('v-form',{ref:\"form\",nativeOn:{\"submit\":function($event){$event.preventDefault();return _vm.submit.apply(null, arguments)}},model:{value:(_vm.valid),callback:function ($$v) {_vm.valid=$$v},expression:\"valid\"}},[_c('v-text-field',{attrs:{\"rules\":_vm.rules['name'],\"label\":\"name\",\"outlined\":\"\",\"dense\":\"\",\"required\":\"\",\"disabled\":!_vm.isNew},model:{value:(_vm.form.name),callback:function ($$v) {_vm.$set(_vm.form, \"name\", $$v)},expression:\"form.name\"}}),_c('v-textarea',{attrs:{\"rules\":_vm.rules['code'],\"label\":\"code\",\"outlined\":\"\",\"dense\":\"\",\"required\":\"\",\"auto-grow\":\"\"},model:{value:(_vm.form.code),callback:function ($$v) {_vm.$set(_vm.form, \"code\", $$v)},expression:\"form.code\"}})],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <edit-page-top\n      :breads=\"breads\"\n      :show-submit=\"initialLoad\"\n      :disable-submit=\"!canEdit && initialLoad\"\n      :show-copy=\"id > 0 && initialLoad\"\n      :show-delete=\"id > 0 && initialLoad\"\n      :submit-loading=\"loading && initialLoad\"\n      :copy-link=\"copyLink\"\n      :small-copy=\"true\"\n      :small-delete=\"true\"\n      @submit=\"submit\"\n      @delete=\"deleteBypass\"\n    />\n    <div class=\"headers\">\n      <h3>{{ mode }} Bypass</h3>\n    </div>\n    <error-state-alert\n      v-if=\"errorState\"\n      :resource-id=\"id\"\n      resource-type=\"bypass\"\n    />\n    <v-card\n      v-else\n      style=\"padding: 10px\"\n    >\n      <v-form\n        ref=\"form\"\n        v-model=\"valid\"\n        @submit.prevent.native=\"submit\"\n      >\n        <v-text-field\n          v-model=\"form.name\"\n          :rules=\"rules['name']\"\n          label=\"name\"\n          outlined\n          dense\n          required\n          :disabled=\"!isNew\"\n        />\n        <v-textarea\n          v-model=\"form.code\"\n          :rules=\"rules['code']\"\n          label=\"code\"\n          outlined\n          dense\n          required\n          auto-grow\n        />\n      </v-form>\n    </v-card>\n  </div>\n</template>\n\n<script>\nimport Vue from 'vue';\nimport ErrorStateAlert from '@/components/ErrorStateAlert.vue';\nimport EditPageTop from '@/components/EditPageTop.vue';\nimport * as bypassApi from '@/api/bypass-api';\n\nexport default {\n  name: 'BypassEdit',\n  components: {\n    ErrorStateAlert,\n    EditPageTop,\n  },\n  data() {\n    return {\n      form: {},\n      rules: {\n        name: [\n          (v) => !!v || 'Name is required',\n          (v) => (!!v && v.length > 2) || 'Name must be larger than 2 characters',\n        ],\n        code: [\n          (v) => !!v || 'Code is required',\n        ],\n      },\n      bypass: {},\n      valid: true,\n      loading: false,\n      errorState: false,\n    };\n  },\n  computed: {\n    isNew() {\n      return this.$route.name === 'bypassNew';\n    },\n    isCopy() {\n      return this.$route.params.copy === true;\n    },\n    mode() {\n      if (this.isCopy) return 'Copy';\n      if (this.isNew) return 'New';\n      return 'View';\n    },\n    canEdit() {\n      return true;\n    },\n    id() {\n      return this.isCopy ? 0 : this.$route.params.id;\n    },\n    copyLink() {\n      if (this.id > 0) return { name: 'bypassNew', params: { copy: true, id: this.id } };\n      return {};\n    },\n    breads() {\n      return [\n        {\n          text: 'Bypasses',\n          disabled: false,\n          to: '/bypasses',\n          exact: true,\n        },\n        {\n          text: this.breadcrumbName,\n          disabled: true,\n          to: '/bypasses-edit',\n        },\n      ];\n    },\n    breadcrumbName() {\n      if (this.isCopy) return 'New';\n      if (this.form.name) return this.form.name;\n      if (this.id) return this.id;\n      return 'New';\n    },\n  },\n  watch: {\n    id(val) {\n      if (val) {\n        this.getBypass(val);\n      }\n    },\n  },\n  mounted() {\n    if (!this.isNew || this.isCopy) {\n      // using the route param id instad of this.id\n      // since this.id is 0 for copies.\n      this.getBypass(this.$route.params.id);\n    } else {\n      this.initialLoad = true;\n    }\n  },\n  methods: {\n    async submit() {\n      if (this.loading || !this.$refs.form.validate()) {\n        return;\n      }\n\n      this.loading = true;\n      if (this.id > 0) {\n        bypassApi.updateBypass(this.form.id, this.form.name, this.form.code)\n          .then(() => {\n            this.$snack.success('Bypass updated');\n            this.loading = false;\n          })\n          .catch((err) => {\n            this.$snack.error(`Error: ${err}`);\n            this.loading = false;\n          });\n      } else {\n        bypassApi.createBypass(this.form.name, this.form.code)\n          .then(({ id }) => {\n            this.$snack.success('Bypass created');\n            this.loading = false;\n            this.$router.push({ name: 'bypassEdit', params: { id } });\n          })\n          .catch((err) => {\n            this.$snack.error(`Error: ${err}`);\n            this.loading = false;\n          });\n      }\n    },\n    async deleteBypass() {\n      if (await this.$root.$confirm('Delete', `Are you sure you want to delete bypass ${this.form.name}?`, { color: 'red' })) {\n        try {\n          await this.$store.dispatch('bypass/deleteBypass', this.form.id);\n          this.$router.push({ name: 'bypasses' });\n        } catch (err) {\n          this.$snack.error(`Error: ${err}`);\n        }\n      }\n    },\n    getBypass(id) {\n      bypassApi.getBypass(id)\n        .then((data) => {\n          this.bypass = { ...data };\n          this.initialLoad = true;\n          Vue.set(this, 'form', { ...data });\n        })\n        .catch(() => {\n          this.errorState = true;\n        });\n    },\n  },\n};\n</script>\n\n<style>\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BypassEdit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BypassEdit.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./BypassEdit.vue?vue&type=template&id=b12c80e0&\"\nimport script from \"./BypassEdit.vue?vue&type=script&lang=js&\"\nexport * from \"./BypassEdit.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VForm } from 'vuetify/lib/components/VForm';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\nimport { VTextarea } from 'vuetify/lib/components/VTextarea';\ninstallComponents(component, {VCard,VForm,VTextField,VTextarea})\n"],"sourceRoot":""}