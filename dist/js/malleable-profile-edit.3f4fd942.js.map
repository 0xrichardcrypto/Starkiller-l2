{"version":3,"sources":["webpack:///./src/views/MalleableProfileEdit.vue?6b31","webpack:///src/views/MalleableProfileEdit.vue","webpack:///./src/views/MalleableProfileEdit.vue?4d2e","webpack:///./src/views/MalleableProfileEdit.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","breads","initialLoad","canEdit","id","loading","copyLink","on","submit","deleteMalleableProfile","staticClass","_v","_s","mode","staticStyle","ref","nativeOn","$event","preventDefault","apply","arguments","model","value","callback","$$v","valid","expression","rules","isNew","form","$set","staticRenderFns","name","components","ErrorStateAlert","EditPageTop","data","category","code","malleableProfile","errorState","computed","$route","isCopy","params","copy","breadcrumbName","watch","val","getMalleableProfile","mounted","methods","component","VCard","VForm","VTextField","VTextarea"],"mappings":"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","file":"js/malleable-profile-edit.3f4fd942.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('edit-page-top',{attrs:{\"breads\":_vm.breads,\"show-submit\":_vm.initialLoad,\"disable-submit\":!_vm.canEdit && _vm.initialLoad,\"show-copy\":_vm.id > 0 && _vm.initialLoad,\"show-delete\":_vm.id > 0 && _vm.initialLoad,\"submit-loading\":_vm.loading && _vm.initialLoad,\"copy-link\":_vm.copyLink,\"small-copy\":true,\"small-delete\":true},on:{\"submit\":_vm.submit,\"delete\":_vm.deleteMalleableProfile}}),_c('div',{staticClass:\"headers\"},[_c('h3',[_vm._v(_vm._s(_vm.mode)+\" Malleable Profile\")])]),(_vm.errorState)?_c('error-state-alert',{attrs:{\"resource-id\":_vm.id,\"resource-type\":\"malleableProfile\"}}):_c('v-card',{staticStyle:{\"padding\":\"10px\"}},[_c('v-form',{ref:\"form\",staticStyle:{\"max-width\":\"500px\"},nativeOn:{\"submit\":function($event){$event.preventDefault();return _vm.submit.apply(null, arguments)}},model:{value:(_vm.valid),callback:function ($$v) {_vm.valid=$$v},expression:\"valid\"}},[_c('v-text-field',{attrs:{\"rules\":_vm.rules['name'],\"label\":\"name\",\"outlined\":\"\",\"dense\":\"\",\"required\":\"\",\"disabled\":!_vm.isNew},model:{value:(_vm.form.name),callback:function ($$v) {_vm.$set(_vm.form, \"name\", $$v)},expression:\"form.name\"}}),_c('v-text-field',{attrs:{\"rules\":_vm.rules['category'],\"label\":\"category\",\"outlined\":\"\",\"dense\":\"\",\"required\":\"\",\"disabled\":!_vm.isNew},model:{value:(_vm.form.category),callback:function ($$v) {_vm.$set(_vm.form, \"category\", $$v)},expression:\"form.category\"}}),_c('v-textarea',{attrs:{\"rules\":_vm.rules['code'],\"label\":\"code\",\"outlined\":\"\",\"dense\":\"\",\"required\":\"\",\"auto-grow\":\"\"},model:{value:(_vm.form.data),callback:function ($$v) {_vm.$set(_vm.form, \"data\", $$v)},expression:\"form.data\"}})],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <edit-page-top\n      :breads=\"breads\"\n      :show-submit=\"initialLoad\"\n      :disable-submit=\"!canEdit && initialLoad\"\n      :show-copy=\"id > 0 && initialLoad\"\n      :show-delete=\"id > 0 && initialLoad\"\n      :submit-loading=\"loading && initialLoad\"\n      :copy-link=\"copyLink\"\n      :small-copy=\"true\"\n      :small-delete=\"true\"\n      @submit=\"submit\"\n      @delete=\"deleteMalleableProfile\"\n    />\n    <div class=\"headers\">\n      <h3>{{ mode }} Malleable Profile</h3>\n    </div>\n    <error-state-alert\n      v-if=\"errorState\"\n      :resource-id=\"id\"\n      resource-type=\"malleableProfile\"\n    />\n    <v-card\n      v-else\n      style=\"padding: 10px\"\n    >\n      <v-form\n        ref=\"form\"\n        v-model=\"valid\"\n        style=\"max-width: 500px\"\n        @submit.prevent.native=\"submit\"\n      >\n        <v-text-field\n          v-model=\"form.name\"\n          :rules=\"rules['name']\"\n          label=\"name\"\n          outlined\n          dense\n          required\n          :disabled=\"!isNew\"\n        />\n        <v-text-field\n          v-model=\"form.category\"\n          :rules=\"rules['category']\"\n          label=\"category\"\n          outlined\n          dense\n          required\n          :disabled=\"!isNew\"\n        />\n        <v-textarea\n          v-model=\"form.data\"\n          :rules=\"rules['code']\"\n          label=\"code\"\n          outlined\n          dense\n          required\n          auto-grow\n        />\n      </v-form>\n    </v-card>\n  </div>\n</template>\n\n<script>\nimport Vue from 'vue';\nimport ErrorStateAlert from '@/components/ErrorStateAlert.vue';\nimport EditPageTop from '@/components/EditPageTop.vue';\nimport * as malleableApi from '@/api/malleable-api';\n\nexport default {\n  name: 'MalleableProfileEdit',\n  components: {\n    ErrorStateAlert,\n    EditPageTop,\n  },\n  data() {\n    return {\n      form: {},\n      rules: {\n        name: [\n          (v) => !!v || 'Name is required',\n          (v) => (!!v && v.length > 3) || 'Name must be larger than 3 characters',\n        ],\n        category: [\n          (v) => !!v || 'Category is required',\n        ],\n        code: [\n          (v) => !!v || 'Code is required',\n        ],\n      },\n      malleableProfile: {},\n      valid: true,\n      loading: false,\n      errorState: false,\n      initialLoad: false,\n    };\n  },\n  computed: {\n    isNew() {\n      return this.$route.name === 'malleableProfileNew';\n    },\n    isCopy() {\n      return this.$route.params.copy === true;\n    },\n    mode() {\n      if (this.isCopy) return 'Copy';\n      if (this.isNew) return 'New';\n      return 'View';\n    },\n    canEdit() {\n      return true;\n    },\n    id() {\n      return this.isCopy ? 0 : this.$route.params.id;\n    },\n    copyLink() {\n      if (this.id > 0) return { name: 'malleableProfileNew', params: { copy: true, id: this.id } };\n      return {};\n    },\n    breads() {\n      return [\n        {\n          text: 'Malleable Profiles',\n          disabled: false,\n          to: '/malleable-profiles',\n          exact: true,\n        },\n        {\n          text: this.breadcrumbName,\n          disabled: true,\n          to: '/malleable-profiles-edit',\n        },\n      ];\n    },\n    breadcrumbName() {\n      if (this.isCopy) return 'New';\n      if (this.malleableProfile.name) return this.malleableProfile.name;\n      if (this.id) return this.id;\n      return 'New';\n    },\n  },\n  watch: {\n    id(val) {\n      if (val) {\n        this.getMalleableProfile(val);\n      }\n    },\n  },\n  mounted() {\n    if (!this.isNew || this.isCopy) {\n      // using the route param id instad of this.id\n      // since this.id is 0 for copies.\n      this.getMalleableProfile(this.$route.params.id);\n    } else {\n      this.initialLoad = true;\n    }\n  },\n  methods: {\n    async submit() {\n      if (this.loading || !this.$refs.form.validate()) {\n        return;\n      }\n\n      this.loading = true;\n      if (this.id > 0) {\n        malleableApi.updateMalleableProfile(this.id, this.form.data)\n          .then(() => {\n            this.$snack.success('Malleable Profile updated');\n            this.loading = false;\n          })\n          .catch((err) => {\n            this.$snack.error(`Error: ${err}`);\n            this.loading = false;\n          });\n      } else {\n        malleableApi.createMalleableProfile(this.form.name, this.form.category, this.form.data)\n          .then(({ id }) => {\n            this.$snack.success('Malleable Profile created');\n            this.loading = false;\n            this.$router.push({ name: 'malleableProfileEdit', params: { id } });\n          })\n          .catch((err) => {\n            this.$snack.error(`Error: ${err}`);\n            this.loading = false;\n          });\n      }\n    },\n    async deleteMalleableProfile() {\n      if (await this.$root.$confirm('Delete', `Are you sure you want to delete profile ${this.form.name}?`, { color: 'red' })) {\n        try {\n          await this.$store.dispatch('malleable/deleteMalleableProfile', this.form.name);\n          this.$router.push({ name: 'malleableProfiles' });\n        } catch (err) {\n          this.$snack.error(`Error: ${err}`);\n        }\n      }\n    },\n    getMalleableProfile(id) {\n      malleableApi.getMalleableProfile(id)\n        .then((data) => {\n          this.malleableProfile = data;\n          this.initialLoad = true;\n          Vue.set(this, 'form', { ...data });\n        })\n        .catch(() => {\n          this.errorState = true;\n        });\n    },\n  },\n};\n</script>\n\n<style>\n\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MalleableProfileEdit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MalleableProfileEdit.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MalleableProfileEdit.vue?vue&type=template&id=144c2138&\"\nimport script from \"./MalleableProfileEdit.vue?vue&type=script&lang=js&\"\nexport * from \"./MalleableProfileEdit.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VForm } from 'vuetify/lib/components/VForm';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\nimport { VTextarea } from 'vuetify/lib/components/VTextarea';\ninstallComponents(component, {VCard,VForm,VTextField,VTextarea})\n"],"sourceRoot":""}