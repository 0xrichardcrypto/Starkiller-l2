{"version":3,"sources":["webpack:///./src/views/BypassEdit.vue?a1cf","webpack:///src/views/BypassEdit.vue","webpack:///./src/views/BypassEdit.vue?716e","webpack:///./src/views/BypassEdit.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","breads","canEdit","loading","copyLink","on","submit","deleteBypass","staticClass","_v","_s","mode","id","staticStyle","ref","nativeOn","$event","preventDefault","apply","arguments","model","value","callback","$$v","valid","expression","rules","isNew","form","$set","staticRenderFns","name","components","ErrorStateAlert","EditPageTop","data","code","bypass","errorState","computed","breadcrumbName","isCopy","$route","params","copy","watch","val","getBypass","mounted","methods","create","update","component","VCard","VForm","VTextField","VTextarea"],"mappings":"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","file":"js/bypass-edit.460e335a.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('edit-page-top',{attrs:{\"breads\":_vm.breads,\"show-submit\":true,\"show-copy\":true,\"show-delete\":!_vm.canEdit,\"submit-loading\":_vm.loading,\"copy-link\":_vm.copyLink},on:{\"submit\":_vm.submit,\"delete\":_vm.deleteBypass}}),_c('div',{staticClass:\"headers\"},[_c('h3',[_vm._v(_vm._s(_vm.mode)+\" Bypass\")])]),(_vm.errorState)?_c('error-state-alert',{attrs:{\"resource-id\":_vm.id,\"resource-type\":\"bypass\"}}):_c('v-card',{staticStyle:{\"padding\":\"10px\"}},[_c('v-form',{ref:\"form\",nativeOn:{\"submit\":function($event){$event.preventDefault();return _vm.submit.apply(null, arguments)}},model:{value:(_vm.valid),callback:function ($$v) {_vm.valid=$$v},expression:\"valid\"}},[_c('v-text-field',{attrs:{\"rules\":_vm.rules['name'],\"label\":\"name\",\"outlined\":\"\",\"dense\":\"\",\"required\":\"\",\"disabled\":!_vm.isNew},model:{value:(_vm.form.name),callback:function ($$v) {_vm.$set(_vm.form, \"name\", $$v)},expression:\"form.name\"}}),_c('v-textarea',{attrs:{\"rules\":_vm.rules['code'],\"label\":\"code\",\"outlined\":\"\",\"dense\":\"\",\"required\":\"\",\"auto-grow\":\"\"},model:{value:(_vm.form.code),callback:function ($$v) {_vm.$set(_vm.form, \"code\", $$v)},expression:\"form.code\"}})],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <edit-page-top\n      :breads=\"breads\"\n      :show-submit=\"true\"\n      :show-copy=\"true\"\n      :show-delete=\"!canEdit\"\n      :submit-loading=\"loading\"\n      :copy-link=\"copyLink\"\n      @submit=\"submit\"\n      @delete=\"deleteBypass\"\n    />\n    <div class=\"headers\">\n      <h3>{{ mode }} Bypass</h3>\n    </div>\n    <error-state-alert\n      v-if=\"errorState\"\n      :resource-id=\"id\"\n      resource-type=\"bypass\"\n    />\n    <v-card\n      v-else\n      style=\"padding: 10px\"\n    >\n      <v-form\n        ref=\"form\"\n        v-model=\"valid\"\n        @submit.prevent.native=\"submit\"\n      >\n        <v-text-field\n          v-model=\"form.name\"\n          :rules=\"rules['name']\"\n          label=\"name\"\n          outlined\n          dense\n          required\n          :disabled=\"!isNew\"\n        />\n        <v-textarea\n          v-model=\"form.code\"\n          :rules=\"rules['code']\"\n          label=\"code\"\n          outlined\n          dense\n          required\n          auto-grow\n        />\n      </v-form>\n    </v-card>\n  </div>\n</template>\n\n<script>\nimport Vue from 'vue';\nimport ErrorStateAlert from '@/components/ErrorStateAlert.vue';\nimport EditPageTop from '@/components/EditPageTop.vue';\nimport * as bypassApi from '@/api/bypass-api';\n\nexport default {\n  name: 'BypassEdit',\n  components: {\n    ErrorStateAlert,\n    EditPageTop,\n  },\n  data() {\n    return {\n      form: {},\n      rules: {\n        name: [\n          (v) => !!v || 'Name is required',\n          (v) => (!!v && v.length > 2) || 'Name must be larger than 2 characters',\n        ],\n        code: [\n          (v) => !!v || 'Code is required',\n        ],\n      },\n      bypass: {},\n      valid: true,\n      loading: false,\n      errorState: false,\n    };\n  },\n  computed: {\n    breads() {\n      return [\n        {\n          text: 'Bypasses',\n          disabled: false,\n          to: '/bypasses',\n          exact: true,\n        },\n        {\n          text: this.breadcrumbName,\n          disabled: true,\n          to: '/bypasses-edit',\n        },\n      ];\n    },\n    breadcrumbName() {\n      if (this.isCopy) return 'New';\n      if (this.form.name) return this.form.name;\n      if (this.id) return this.id;\n      return 'New';\n    },\n    isNew() {\n      return this.$route.name === 'bypassNew';\n    },\n    isCopy() {\n      return this.$route.params.copy === true;\n    },\n    mode() {\n      if (this.isCopy) return 'Copy';\n      if (this.isNew) return 'New';\n      return 'View';\n    },\n    canEdit() {\n      return this.isNew;\n    },\n    id() {\n      return this.$route.params.id;\n    },\n    copyLink() {\n      if (!this.canEdit) return { name: 'bypassNew', params: { copy: true, id: this.id } };\n      return {};\n    },\n  },\n  watch: {\n    id(val) {\n      if (val) {\n        this.getBypass(val);\n      }\n    },\n  },\n  mounted() {\n    if (!this.isNew || this.isCopy) {\n      this.getBypass(this.id);\n    }\n  },\n  methods: {\n    async submit() {\n      if (this.loading || !this.$refs.form.validate()) {\n        return;\n      }\n      this.loading = true;\n      if (this.isNew) {\n        await this.create();\n      } else {\n        await this.update();\n      }\n      this.loading = false;\n    },\n    create() {\n      return bypassApi.createBypass(this.form.name, this.form.code)\n        .then((res) => {\n          console.log(res);\n          this.$router.push({ name: 'bypassEdit', params: { id: res.id } });\n        })\n        .catch((err) => this.$snack.error(`Error: ${err}`));\n    },\n    update() {\n      return bypassApi.updateBypass(this.form.id, this.form.name, this.form.code)\n        .then(() => this.$router.push({ name: 'bypasses' }))\n        .catch((err) => this.$snack.error(`Error: ${err}`));\n    },\n    getBypass(id) {\n      bypassApi.getBypass(id)\n        .then((data) => {\n          this.bypass = { ...data };\n          Vue.set(this, 'form', { ...data });\n        })\n        .catch(() => {\n          this.errorState = true;\n        });\n    },\n    async deleteBypass() {\n      if (await this.$root.$confirm('Delete', `Are you sure you want to delete bypass ${this.form.name}?`, { color: 'red' })) {\n        try {\n          await this.$store.dispatch('bypass/deleteBypass', this.form.id);\n          this.$router.push({ name: 'bypasses' });\n        } catch (err) {\n          this.$snack.error(`Error: ${err}`);\n        }\n      }\n    },\n  },\n};\n</script>\n\n<style>\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BypassEdit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BypassEdit.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./BypassEdit.vue?vue&type=template&id=b2870e9a&\"\nimport script from \"./BypassEdit.vue?vue&type=script&lang=js&\"\nexport * from \"./BypassEdit.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VForm } from 'vuetify/lib/components/VForm';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\nimport { VTextarea } from 'vuetify/lib/components/VTextarea';\ninstallComponents(component, {VCard,VForm,VTextField,VTextarea})\n"],"sourceRoot":""}