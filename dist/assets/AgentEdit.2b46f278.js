import{o as I,m as g,C as x,aG as Le,c as f,T as D,b as v,ah as Ve,aH as Ne,aI as G,aJ as W,aK as he,g as Ye,w as E,al as de,a1 as y,aL as ie,K as Re,t as q,aM as je,a2 as k,ag as Y,aN as Ue,aO as We,h as qe,P as Ke,aP as He,aQ as Ge,ao as Ze,v as h,an as Je,am as Xe,aR as Qe,a6 as et,n as S,a as P,i as tt,aS as it,aT as st,aU as nt,aV as se,ad as B,aW as Z,ab as $,aX as J,aY as L,aZ as X,a_ as R,a$ as ce,b0 as at,az as rt,j as lt,k as ot,a0 as ht,b1 as dt,b2 as ct,b3 as Q,ay as ut,b4 as pt,aA as mt,b5 as ft,l as gt}from"./index.3392e392.js";import{h as K}from"./moment.9709ab41.js";import{b as z,c as C,a as ue,_ as pe}from"./ErrorStateAlert.4b569c8d.js";import{a as me}from"./GeneralForm.da9d2d81.js";import{b as fe,_ as ge}from"./VSelect.e9728020.js";import{_ as ve}from"./AgentTasksList.04c39b8e.js";import{_ as V}from"./AgentExecuteModule.3250c100.js";import{l as vt}from"./index.8210e5b2.js";import{_ as _e}from"./VTooltip.991ee143.js";import{_ as T}from"./TooltipButton.01c96598.js";import{_ as ye}from"./TooltipButtonToggle.ec381d4b.js";import{c as _t,d as yt}from"./download-api.f398cae0.js";import{B as be}from"./VExpansionPanelHeader.6f0f98fd.js";import{_ as bt,a as A,b as kt,c as M}from"./VTabItem.f12a8761.js";import{_ as $t}from"./VBreadcrumbs.7dc6e76b.js";import"./index.d0d7b01b.js";import"./VSwitch.3d355dda.js";import"./index.df31d39d.js";import"./ListPageTop.dd85a4b7.js";import"./download-stager.85a6b476.js";import"./VDataTable.f2185226.js";import"./TechniqueChips.020e64ab.js";import"./InfoViewer.804e1a3d.js";const N=I.extend({name:"localable",props:{locale:String},computed:{currentLocale(){return this.locale||this.$vuetify.lang.current}}});function wt(e,t=0,i=1){let s;return e<100&&e>=0?(s=new Date(Date.UTC(e,t,i)),isFinite(s.getUTCFullYear())&&s.setUTCFullYear(e)):s=new Date(Date.UTC(e,t,i)),s}function H(e,t,i){const s=7+t-i;return-((7+wt(e,0,s).getUTCDay()-t)%7)+s-1}function xt(e,t,i,s){let n=[0,31,59,90,120,151,181,212,243,273,304,334][t];return t>1&&ee(e)&&n++,n+i}function j(e,t,i){const s=H(e,t,i),n=H(e+1,t,i);return((ee(e)?366:365)-s+n)/7}function St(e,t,i,s,n){const a=H(e,s,n),r=Math.ceil((xt(e,t,i)-a)/7);return r<1?r+j(e-1,s,n):r>j(e,s,n)?r-j(e,s,n):r}function ee(e){return e%4===0&&e%100!==0||e%400===0}const Ct=[0,31,28,31,30,31,30,31,31,30,31,30,31],Tt=[0,31,29,31,30,31,30,31,31,30,31,30,31];function Dt(e,t){return ee(e)?Tt[t]:Ct[t]}const Pt=g(x).extend({methods:{genPickerButton(e,t,i,s=!1,n=""){const a=this[e]===t,r=l=>{l.stopPropagation(),this.$emit(`update:${Le(e)}`,t)};return this.$createElement("div",{staticClass:`v-picker__title__btn ${n}`.trim(),class:{"v-picker__title__btn--active":a,"v-picker__title__btn--readonly":s},on:a||s?void 0:{click:r}},Array.isArray(i)?i:[i])}}}),zt=g(Pt).extend({name:"v-date-picker-title",props:{date:{type:String,default:""},disabled:Boolean,readonly:Boolean,selectingYear:Boolean,value:{type:String},year:{type:[Number,String],default:""},yearIcon:{type:String}},data:()=>({isReversing:!1}),computed:{computedTransition(){return this.isReversing?"picker-reverse-transition":"picker-transition"}},watch:{value(e,t){this.isReversing=e<t}},methods:{genYearIcon(){return this.$createElement(f,{props:{dark:!0}},this.yearIcon)},getYearBtn(){return this.genPickerButton("selectingYear",!0,[String(this.year),this.yearIcon?this.genYearIcon():null],!1,"v-date-picker-title__year")},genTitleText(){return this.$createElement("transition",{props:{name:this.computedTransition}},[this.$createElement("div",{domProps:{innerHTML:this.date||"&nbsp;"},key:this.value})])},genTitleDate(){return this.genPickerButton("selectingYear",!1,[this.genTitleText()],!1,"v-date-picker-title__date")}},render(e){return e("div",{staticClass:"v-date-picker-title",class:{"v-date-picker-title--disabled":this.disabled}},[this.getYearBtn(),this.genTitleDate()])}});function ke(e,t,i){return Object.keys(e.$listeners).reduce((s,n)=>(n.endsWith(t)&&(s[n.slice(0,-t.length)]=a=>e.$emit(n,i,a)),s),{})}function U(e,t){return Object.keys(e.$listeners).reduce((i,s)=>(s.endsWith(t)&&(i[s]=e.$listeners[s]),i),{})}const At=(e,t,i)=>(t=t>>0,e=String(e),i=String(i),e.length>t?String(e):(t=t-e.length,t>i.length&&(i+=i.repeat(t/i.length)),i.slice(0,t)+String(e))),d=(e,t=2)=>At(e,t,"0");function w(e,t,i={start:0,length:0}){const s=n=>{const[a,r,l]=n.trim().split(" ")[0].split("-");return[d(a,4),d(r||1),d(l||1)].join("-")};try{const n=new Intl.DateTimeFormat(e||void 0,t);return a=>n.format(new Date(`${s(a)}T00:00:00+00:00`))}catch{return i.start||i.length?a=>s(a).substr(i.start||0,i.length):void 0}}const $e=(e,t)=>{const[i,s]=e.split("-").map(Number);return s+t===0?`${i-1}-12`:s+t===13?`${i+1}-01`:`${i}-${d(s+t)}`},p=(e,t)=>{const[i,s=1,n=1]=e.split("-");return`${i}-${d(s)}-${d(n)}`.substr(0,{date:10,month:7,year:4}[t])},Mt=g(x,N,D).extend({name:"v-date-picker-header",props:{disabled:Boolean,format:Function,min:String,max:String,nextAriaLabel:String,nextIcon:{type:String,default:"$next"},prevAriaLabel:String,prevIcon:{type:String,default:"$prev"},readonly:Boolean,value:{type:[Number,String],required:!0}},data(){return{isReversing:!1}},computed:{formatter(){return this.format?this.format:String(this.value).split("-")[1]?w(this.currentLocale,{month:"long",year:"numeric",timeZone:"UTC"},{length:7}):w(this.currentLocale,{year:"numeric",timeZone:"UTC"},{length:4})}},watch:{value(e,t){this.isReversing=e<t}},methods:{genBtn(e){const t=e>0?this.nextAriaLabel:this.prevAriaLabel,i=t?this.$vuetify.lang.t(t):void 0,s=this.disabled||e<0&&this.min&&this.calculateChange(e)<this.min||e>0&&this.max&&this.calculateChange(e)>this.max;return this.$createElement(v,{attrs:{"aria-label":i},props:{dark:this.dark,disabled:s,icon:!0,light:this.light},on:{click:n=>{n.stopPropagation(),this.$emit("input",this.calculateChange(e))}}},[this.$createElement(f,e<0==!this.$vuetify.rtl?this.prevIcon:this.nextIcon)])},calculateChange(e){const[t,i]=String(this.value).split("-").map(Number);return i==null?`${t+e}`:$e(String(this.value),e)},genHeader(){const e=!this.disabled&&(this.color||"accent"),t=this.$createElement("div",this.setTextColor(e,{key:String(this.value)}),[this.$createElement("button",{attrs:{type:"button"},on:{click:()=>this.$emit("toggle")}},[this.$slots.default||this.formatter(String(this.value))])]),i=this.$createElement("transition",{props:{name:this.isReversing===!this.$vuetify.rtl?"tab-reverse-transition":"tab-transition"}},[t]);return this.$createElement("div",{staticClass:"v-date-picker-header__value",class:{"v-date-picker-header__value--disabled":this.disabled}},[i])}},render(){return this.$createElement("div",{staticClass:"v-date-picker-header",class:{"v-date-picker-header--disabled":this.disabled,...this.themeClasses}},[this.genBtn(-1),this.genHeader(),this.genBtn(1)])}});function we(e,t,i,s){return(!s||s(e))&&(!t||e>=t.substr(0,10))&&(!i||e<=i)}const xe=g(x,N,D).extend({directives:{Touch:Ve},props:{allowedDates:Function,current:String,disabled:Boolean,format:Function,events:{type:[Array,Function,Object],default:()=>null},eventColor:{type:[Array,Function,Object,String],default:()=>"warning"},min:String,max:String,range:Boolean,readonly:Boolean,scrollable:Boolean,tableDate:{type:String,required:!0},value:[String,Array]},data:()=>({isReversing:!1,wheelThrottle:null}),computed:{computedTransition(){return this.isReversing===!this.$vuetify.rtl?"tab-reverse-transition":"tab-transition"},displayedMonth(){return Number(this.tableDate.split("-")[1])-1},displayedYear(){return Number(this.tableDate.split("-")[0])}},watch:{tableDate(e,t){this.isReversing=e<t}},mounted(){this.wheelThrottle=Ne(this.wheel,250)},methods:{genButtonClasses(e,t,i,s,n,a){return{"v-size--default":!t,"v-date-picker-table__current":s,"v-btn--active":i,"v-btn--flat":!e||this.disabled,"v-btn--text":i===s,"v-btn--rounded":t,"v-btn--disabled":!e||this.disabled,"v-btn--outlined":s&&!i,"v-date-picker--first-in-range":n,"v-date-picker--last-in-range":a,...this.themeClasses}},genButtonEvents(e,t,i){if(!this.disabled)return G({click:()=>{t&&!this.readonly&&this.$emit("input",e)}},ke(this,`:${i}`,e))},genButton(e,t,i,s,n=!1){const a=we(e,this.min,this.max,this.allowedDates),r=this.isSelected(e)&&a,l=e===this.current,o=r?this.setBackgroundColor:this.setTextColor,c=(r||l)&&(this.color||"accent");let _=!1,m=!1;return this.range&&!!this.value&&Array.isArray(this.value)&&(_=e===this.value[0],m=e===this.value[this.value.length-1]),this.$createElement("button",o(c,{staticClass:"v-btn",class:this.genButtonClasses(a&&!n,t,r,l,_,m),attrs:{type:"button"},domProps:{disabled:this.disabled||!a||n},on:this.genButtonEvents(e,a,i)}),[this.$createElement("div",{staticClass:"v-btn__content"},[s(e)]),this.genEvents(e)])},getEventColors(e){const t=n=>Array.isArray(n)?n:[n];let i,s=[];if(Array.isArray(this.events)?i=this.events.includes(e):this.events instanceof Function?i=this.events(e)||!1:this.events?i=this.events[e]||!1:i=!1,i)i!==!0?s=t(i):typeof this.eventColor=="string"?s=[this.eventColor]:typeof this.eventColor=="function"?s=t(this.eventColor(e)):Array.isArray(this.eventColor)?s=this.eventColor:s=t(this.eventColor[e]);else return[];return s.filter(n=>n)},genEvents(e){const t=this.getEventColors(e);return t.length?this.$createElement("div",{staticClass:"v-date-picker-table__events"},t.map(i=>this.$createElement("div",this.setBackgroundColor(i)))):null},isValidScroll(e,t){const i=t(e),s=i.split("-").length===1?"year":"month";return e<0&&(this.min?i>=p(this.min,s):!0)||e>0&&(this.max?i<=p(this.max,s):!0)},wheel(e,t){this.$emit("update:table-date",t(e.deltaY))},touch(e,t){this.$emit("update:table-date",t(e))},genTable(e,t,i){const s=this.$createElement("transition",{props:{name:this.computedTransition}},[this.$createElement("table",{key:this.tableDate},t)]),n={name:"touch",value:{left:a=>a.offsetX<-15&&this.isValidScroll(1,i)&&this.touch(1,i),right:a=>a.offsetX>15&&this.isValidScroll(-1,i)&&this.touch(-1,i)}};return this.$createElement("div",{staticClass:e,class:{"v-date-picker-table--disabled":this.disabled,...this.themeClasses},on:!this.disabled&&this.scrollable?{wheel:a=>{a.preventDefault(),this.isValidScroll(a.deltaY,i)&&this.wheelThrottle(a,i)}}:void 0,directives:[n]},[s])},isSelected(e){if(Array.isArray(this.value))if(this.range&&this.value.length===2){const[t,i]=[...this.value].sort();return t<=e&&e<=i}else return this.value.indexOf(e)!==-1;return e===this.value}}}),Ft=g(xe).extend({name:"v-date-picker-date-table",props:{firstDayOfWeek:{type:[String,Number],default:0},localeFirstDayOfYear:{type:[String,Number],default:0},showAdjacentMonths:Boolean,showWeek:Boolean,weekdayFormat:Function},computed:{formatter(){return this.format||w(this.currentLocale,{day:"numeric",timeZone:"UTC"},{start:8,length:2})},weekdayFormatter(){return this.weekdayFormat||w(this.currentLocale,{weekday:"narrow",timeZone:"UTC"})},weekDays(){const e=parseInt(this.firstDayOfWeek,10);return this.weekdayFormatter?W(7).map(t=>this.weekdayFormatter(`2017-01-${e+t+15}`)):W(7).map(t=>["S","M","T","W","T","F","S"][(t+e)%7])}},methods:{calculateTableDate(e){return $e(this.tableDate,Math.sign(e||1))},genTHead(){const e=this.weekDays.map(t=>this.$createElement("th",t));return this.showWeek&&e.unshift(this.$createElement("th")),this.$createElement("thead",this.genTR(e))},weekDaysBeforeFirstDayOfTheMonth(){return(new Date(`${this.displayedYear}-${d(this.displayedMonth+1)}-01T00:00:00+00:00`).getUTCDay()-parseInt(this.firstDayOfWeek)+7)%7},getWeekNumber(e){return St(this.displayedYear,this.displayedMonth,e,parseInt(this.firstDayOfWeek),parseInt(this.localeFirstDayOfYear))},genWeekNumber(e){return this.$createElement("td",[this.$createElement("small",{staticClass:"v-date-picker-table--date__week"},String(e).padStart(2,"0"))])},genTBody(){const e=[],t=new Date(this.displayedYear,this.displayedMonth+1,0).getDate();let i=[],s=this.weekDaysBeforeFirstDayOfTheMonth();this.showWeek&&i.push(this.genWeekNumber(this.getWeekNumber(1)));const n=this.displayedMonth?this.displayedYear:this.displayedYear-1,a=(this.displayedMonth+11)%12,r=new Date(this.displayedYear,this.displayedMonth,0).getDate(),l=this.showWeek?8:7;for(;s--;){const m=`${n}-${d(a+1)}-${d(r-s)}`;i.push(this.$createElement("td",this.showAdjacentMonths?[this.genButton(m,!0,"date",this.formatter,!0)]:[]))}for(s=1;s<=t;s++){const m=`${this.displayedYear}-${d(this.displayedMonth+1)}-${d(s)}`;i.push(this.$createElement("td",[this.genButton(m,!0,"date",this.formatter)])),i.length%l===0&&(e.push(this.genTR(i)),i=[],this.showWeek&&(s<t||this.showAdjacentMonths)&&i.push(this.genWeekNumber(this.getWeekNumber(s+7))))}const o=this.displayedMonth===11?this.displayedYear+1:this.displayedYear,c=(this.displayedMonth+1)%12;let _=1;for(;i.length<l;){const m=`${o}-${d(c+1)}-${d(_++)}`;i.push(this.$createElement("td",this.showAdjacentMonths?[this.genButton(m,!0,"date",this.formatter,!0)]:[]))}return i.length&&e.push(this.genTR(i)),this.$createElement("tbody",e)},genTR(e){return[this.$createElement("tr",e)]}},render(){return this.genTable("v-date-picker-table v-date-picker-table--date",[this.genTHead(),this.genTBody()],this.calculateTableDate)}}),It=g(xe).extend({name:"v-date-picker-month-table",computed:{formatter(){return this.format||w(this.currentLocale,{month:"short",timeZone:"UTC"},{start:5,length:2})}},methods:{calculateTableDate(e){return`${parseInt(this.tableDate,10)+Math.sign(e||1)}`},genTBody(){const e=[],t=Array(3).fill(null),i=12/t.length;for(let s=0;s<i;s++){const n=t.map((a,r)=>{const l=s*t.length+r,o=`${this.displayedYear}-${d(l+1)}`;return this.$createElement("td",{key:l},[this.genButton(o,!1,"month",this.formatter)])});e.push(this.$createElement("tr",{key:s},n))}return this.$createElement("tbody",e)}},render(){return this.genTable("v-date-picker-table v-date-picker-table--month",[this.genTBody()],this.calculateTableDate)}});const Et=g(x,N).extend({name:"v-date-picker-years",props:{format:Function,min:[Number,String],max:[Number,String],readonly:Boolean,value:[Number,String]},data(){return{defaultColor:"primary"}},computed:{formatter(){return this.format||w(this.currentLocale,{year:"numeric",timeZone:"UTC"},{length:4})}},mounted(){setTimeout(()=>{const e=this.$el.getElementsByClassName("active")[0];e?this.$el.scrollTop=e.offsetTop-this.$el.offsetHeight/2+e.offsetHeight/2:this.min&&!this.max?this.$el.scrollTop=this.$el.scrollHeight:!this.min&&this.max?this.$el.scrollTop=0:this.$el.scrollTop=this.$el.scrollHeight/2-this.$el.offsetHeight/2})},methods:{genYearItem(e){const t=this.formatter(`${e}`),i=parseInt(this.value,10)===e,s=i&&(this.color||"primary");return this.$createElement("li",this.setTextColor(s,{key:e,class:{active:i},on:G({click:()=>this.$emit("input",e)},ke(this,":year",e))}),t)},genYearItems(){const e=[],t=this.value?parseInt(this.value,10):new Date().getFullYear(),i=this.max?parseInt(this.max,10):t+100,s=Math.min(i,this.min?parseInt(this.min,10):t-100);for(let n=i;n>=s;n--)e.push(this.genYearItem(n));return e}},render(){return this.$createElement("ul",{staticClass:"v-date-picker-years",ref:"years"},this.genYearItems())}});const Ot=g(x,he,D).extend({name:"v-picker",props:{flat:Boolean,fullWidth:Boolean,landscape:Boolean,noTitle:Boolean,transition:{type:String,default:"fade-transition"},width:{type:[Number,String],default:290}},computed:{computedTitleColor(){const e=this.isDark?!1:this.color||"primary";return this.color||e}},methods:{genTitle(){return this.$createElement("div",this.setBackgroundColor(this.computedTitleColor,{staticClass:"v-picker__title",class:{"v-picker__title--landscape":this.landscape}}),this.$slots.title)},genBodyTransition(){return this.$createElement("transition",{props:{name:this.transition}},this.$slots.default)},genBody(){return this.$createElement("div",{staticClass:"v-picker__body",class:{"v-picker__body--no-title":this.noTitle,...this.themeClasses},style:this.fullWidth?void 0:{width:Ye(this.width)}},[this.genBodyTransition()])},genActions(){return this.$createElement("div",{staticClass:"v-picker__actions v-card__actions",class:{"v-picker__actions--no-title":this.noTitle}},this.$slots.actions)}},render(e){return e("div",{staticClass:"v-picker v-card",class:{"v-picker--flat":this.flat,"v-picker--landscape":this.landscape,"v-picker--full-width":this.fullWidth,...this.themeClasses,...this.elevationClasses}},[this.$slots.title?this.genTitle():null,this.genBody(),this.$slots.actions?this.genActions():null])}}),Bt=g(x,he,D).extend({name:"picker",props:{flat:Boolean,fullWidth:Boolean,headerColor:String,landscape:Boolean,noTitle:Boolean,width:{type:[Number,String],default:290}},methods:{genPickerTitle(){return null},genPickerBody(){return null},genPickerActionsSlot(){return this.$scopedSlots.default?this.$scopedSlots.default({save:this.save,cancel:this.cancel}):this.$slots.default},genPicker(e){const t=[];if(!this.noTitle){const s=this.genPickerTitle();s&&t.push(s)}const i=this.genPickerBody();return i&&t.push(i),t.push(this.$createElement("template",{slot:"actions"},[this.genPickerActionsSlot()])),this.$createElement(Ot,{staticClass:e,props:{color:this.headerColor||this.color,dark:this.dark,elevation:this.elevation,flat:this.flat,fullWidth:this.fullWidth,landscape:this.landscape,light:this.light,width:this.width,noTitle:this.noTitle}},t)}}}),Lt=g(N,Bt).extend({name:"v-date-picker",props:{activePicker:String,allowedDates:Function,dayFormat:Function,disabled:Boolean,events:{type:[Array,Function,Object],default:()=>null},eventColor:{type:[Array,Function,Object,String],default:()=>"warning"},firstDayOfWeek:{type:[String,Number],default:0},headerDateFormat:Function,localeFirstDayOfYear:{type:[String,Number],default:0},max:String,min:String,monthFormat:Function,multiple:Boolean,nextIcon:{type:String,default:"$next"},nextMonthAriaLabel:{type:String,default:"$vuetify.datePicker.nextMonthAriaLabel"},nextYearAriaLabel:{type:String,default:"$vuetify.datePicker.nextYearAriaLabel"},pickerDate:String,prevIcon:{type:String,default:"$prev"},prevMonthAriaLabel:{type:String,default:"$vuetify.datePicker.prevMonthAriaLabel"},prevYearAriaLabel:{type:String,default:"$vuetify.datePicker.prevYearAriaLabel"},range:Boolean,reactive:Boolean,readonly:Boolean,scrollable:Boolean,showCurrent:{type:[Boolean,String],default:!0},selectedItemsText:{type:String,default:"$vuetify.datePicker.itemsSelected"},showAdjacentMonths:Boolean,showWeek:Boolean,titleDateFormat:Function,type:{type:String,default:"date",validator:e=>["date","month"].includes(e)},value:[Array,String],weekdayFormat:Function,yearFormat:Function,yearIcon:String},data(){const e=new Date;return{internalActivePicker:this.type.toUpperCase(),inputDay:null,inputMonth:null,inputYear:null,isReversing:!1,now:e,tableDate:(()=>{if(this.pickerDate)return this.pickerDate;const t=E(this.value),i=t[t.length-1]||(typeof this.showCurrent=="string"?this.showCurrent:`${e.getFullYear()}-${e.getMonth()+1}`);return p(i,this.type==="date"?"month":"year")})()}},computed:{multipleValue(){return E(this.value)},isMultiple(){return this.multiple||this.range},lastValue(){return this.isMultiple?this.multipleValue[this.multipleValue.length-1]:this.value},selectedMonths(){return!this.value||this.type==="month"?this.value:this.isMultiple?this.multipleValue.map(e=>e.substr(0,7)):this.value.substr(0,7)},current(){return this.showCurrent===!0?p(`${this.now.getFullYear()}-${this.now.getMonth()+1}-${this.now.getDate()}`,this.type):this.showCurrent||null},inputDate(){return this.type==="date"?`${this.inputYear}-${d(this.inputMonth+1)}-${d(this.inputDay)}`:`${this.inputYear}-${d(this.inputMonth+1)}`},tableMonth(){return Number((this.pickerDate||this.tableDate).split("-")[1])-1},tableYear(){return Number((this.pickerDate||this.tableDate).split("-")[0])},minMonth(){return this.min?p(this.min,"month"):null},maxMonth(){return this.max?p(this.max,"month"):null},minYear(){return this.min?p(this.min,"year"):null},maxYear(){return this.max?p(this.max,"year"):null},formatters(){return{year:this.yearFormat||w(this.currentLocale,{year:"numeric",timeZone:"UTC"},{length:4}),titleDate:this.titleDateFormat||(this.isMultiple?this.defaultTitleMultipleDateFormatter:this.defaultTitleDateFormatter)}},defaultTitleMultipleDateFormatter(){return e=>e.length?e.length===1?this.defaultTitleDateFormatter(e[0]):this.$vuetify.lang.t(this.selectedItemsText,e.length):"-"},defaultTitleDateFormatter(){const e={year:{year:"numeric",timeZone:"UTC"},month:{month:"long",timeZone:"UTC"},date:{weekday:"short",month:"short",day:"numeric",timeZone:"UTC"}},t=w(this.currentLocale,e[this.type],{start:0,length:{date:10,month:7,year:4}[this.type]}),i=s=>t(s).replace(/([^\d\s])([\d])/g,(n,a,r)=>`${a} ${r}`).replace(", ",",<br>");return this.landscape?i:t}},watch:{internalActivePicker:{immediate:!0,handler(e){this.$emit("update:active-picker",e)}},activePicker(e){this.internalActivePicker=e},tableDate(e,t){const i=this.type==="month"?"year":"month";this.isReversing=p(e,i)<p(t,i),this.$emit("update:picker-date",e)},pickerDate(e){e?this.tableDate=e:this.lastValue&&this.type==="date"?this.tableDate=p(this.lastValue,"month"):this.lastValue&&this.type==="month"&&(this.tableDate=p(this.lastValue,"year"))},value(e,t){this.checkMultipleProp(),this.setInputDate(),(!this.isMultiple&&this.value&&!this.pickerDate||this.isMultiple&&this.multipleValue.length&&(!t||!t.length)&&!this.pickerDate)&&(this.tableDate=p(this.inputDate,this.type==="month"?"year":"month"))},type(e){if(this.internalActivePicker=e.toUpperCase(),this.value&&this.value.length){const t=this.multipleValue.map(i=>p(i,e)).filter(this.isDateAllowed);this.$emit("input",this.isMultiple?t:t[0])}}},created(){this.checkMultipleProp(),this.pickerDate!==this.tableDate&&this.$emit("update:picker-date",this.tableDate),this.setInputDate()},methods:{emitInput(e){if(this.range){if(this.multipleValue.length!==1)this.$emit("input",[e]);else{const i=[this.multipleValue[0],e];this.$emit("input",i),this.$emit("change",i)}return}const t=this.multiple?this.multipleValue.indexOf(e)===-1?this.multipleValue.concat([e]):this.multipleValue.filter(i=>i!==e):e;this.$emit("input",t),this.multiple||this.$emit("change",e)},checkMultipleProp(){if(this.value==null)return;const e=this.value.constructor.name,t=this.isMultiple?"Array":"String";e!==t&&de(`Value must be ${this.isMultiple?"an":"a"} ${t}, got ${e}`,this)},isDateAllowed(e){return we(e,this.min,this.max,this.allowedDates)},yearClick(e){this.inputYear=e,this.type==="month"?this.tableDate=`${e}`:this.tableDate=`${e}-${d((this.tableMonth||0)+1)}`,this.internalActivePicker="MONTH",this.reactive&&!this.readonly&&!this.isMultiple&&this.isDateAllowed(this.inputDate)&&this.$emit("input",this.inputDate)},monthClick(e){const[t,i]=e.split("-");this.inputYear=parseInt(t,10),this.inputMonth=parseInt(i,10)-1,this.type==="date"?(this.inputDay&&(this.inputDay=Math.min(this.inputDay,Dt(this.inputYear,this.inputMonth+1))),this.tableDate=e,this.internalActivePicker="DATE",this.reactive&&!this.readonly&&!this.isMultiple&&this.isDateAllowed(this.inputDate)&&this.$emit("input",this.inputDate)):this.emitInput(this.inputDate)},dateClick(e){const[t,i,s]=e.split("-");this.inputYear=parseInt(t,10),this.inputMonth=parseInt(i,10)-1,this.inputDay=parseInt(s,10),this.emitInput(this.inputDate)},genPickerTitle(){return this.$createElement(zt,{props:{date:this.value?this.formatters.titleDate(this.isMultiple?this.multipleValue:this.value):"",disabled:this.disabled,readonly:this.readonly,selectingYear:this.internalActivePicker==="YEAR",year:this.formatters.year(this.multipleValue.length?`${this.inputYear}`:this.tableDate),yearIcon:this.yearIcon,value:this.multipleValue[0]},slot:"title",on:{"update:selecting-year":e=>this.internalActivePicker=e?"YEAR":this.type.toUpperCase()}})},genTableHeader(){return this.$createElement(Mt,{props:{nextIcon:this.nextIcon,color:this.color,dark:this.dark,disabled:this.disabled,format:this.headerDateFormat,light:this.light,locale:this.locale,min:this.internalActivePicker==="DATE"?this.minMonth:this.minYear,max:this.internalActivePicker==="DATE"?this.maxMonth:this.maxYear,nextAriaLabel:this.internalActivePicker==="DATE"?this.nextMonthAriaLabel:this.nextYearAriaLabel,prevAriaLabel:this.internalActivePicker==="DATE"?this.prevMonthAriaLabel:this.prevYearAriaLabel,prevIcon:this.prevIcon,readonly:this.readonly,value:this.internalActivePicker==="DATE"?`${d(this.tableYear,4)}-${d(this.tableMonth+1)}`:`${d(this.tableYear,4)}`},on:{toggle:()=>this.internalActivePicker=this.internalActivePicker==="DATE"?"MONTH":"YEAR",input:e=>this.tableDate=e}})},genDateTable(){return this.$createElement(Ft,{props:{allowedDates:this.allowedDates,color:this.color,current:this.current,dark:this.dark,disabled:this.disabled,events:this.events,eventColor:this.eventColor,firstDayOfWeek:this.firstDayOfWeek,format:this.dayFormat,light:this.light,locale:this.locale,localeFirstDayOfYear:this.localeFirstDayOfYear,min:this.min,max:this.max,range:this.range,readonly:this.readonly,scrollable:this.scrollable,showAdjacentMonths:this.showAdjacentMonths,showWeek:this.showWeek,tableDate:`${d(this.tableYear,4)}-${d(this.tableMonth+1)}`,value:this.value,weekdayFormat:this.weekdayFormat},ref:"table",on:{input:this.dateClick,"update:table-date":e=>this.tableDate=e,...U(this,":date")}})},genMonthTable(){return this.$createElement(It,{props:{allowedDates:this.type==="month"?this.allowedDates:null,color:this.color,current:this.current?p(this.current,"month"):null,dark:this.dark,disabled:this.disabled,events:this.type==="month"?this.events:null,eventColor:this.type==="month"?this.eventColor:null,format:this.monthFormat,light:this.light,locale:this.locale,min:this.minMonth,max:this.maxMonth,range:this.range,readonly:this.readonly&&this.type==="month",scrollable:this.scrollable,value:this.selectedMonths,tableDate:`${d(this.tableYear,4)}`},ref:"table",on:{input:this.monthClick,"update:table-date":e=>this.tableDate=e,...U(this,":month")}})},genYears(){return this.$createElement(Et,{props:{color:this.color,format:this.yearFormat,locale:this.locale,min:this.minYear,max:this.maxYear,value:this.tableYear},on:{input:this.yearClick,...U(this,":year")}})},genPickerBody(){const e=this.internalActivePicker==="YEAR"?[this.genYears()]:[this.genTableHeader(),this.internalActivePicker==="DATE"?this.genDateTable():this.genMonthTable()];return this.$createElement("div",{key:this.internalActivePicker},e)},setInputDate(){if(this.lastValue){const e=this.lastValue.split("-");this.inputYear=parseInt(e[0],10),this.inputMonth=parseInt(e[1],10)-1,this.type==="date"&&(this.inputDay=parseInt(e[2],10))}else this.inputYear=this.inputYear||this.now.getFullYear(),this.inputMonth=this.inputMonth==null?this.inputMonth:this.now.getMonth(),this.inputDay=this.inputDay||this.now.getDate()}},render(){return this.genPicker("v-picker--date")}});const Vt=y.extend({name:"v-file-input",model:{prop:"value",event:"change"},props:{chips:Boolean,clearable:{type:Boolean,default:!0},counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},hideInput:Boolean,multiple:Boolean,placeholder:String,prependIcon:{type:String,default:"$file"},readonly:{type:Boolean,default:!1},showSize:{type:[Boolean,Number],default:!1,validator:e=>typeof e=="boolean"||[1e3,1024].includes(e)},smallChips:Boolean,truncateLength:{type:[Number,String],default:22},type:{type:String,default:"file"},value:{default:void 0,validator:e=>E(e).every(t=>t!=null&&typeof t=="object")}},computed:{classes(){return{...y.options.computed.classes.call(this),"v-file-input":!0}},computedCounterValue(){const e=this.multiple&&this.lazyValue?this.lazyValue.length:this.lazyValue instanceof File?1:0;if(!this.showSize)return this.$vuetify.lang.t(this.counterString,e);const t=this.internalArrayValue.reduce((i,{size:s=0})=>i+s,0);return this.$vuetify.lang.t(this.counterSizeString,e,ie(t,this.base===1024))},internalArrayValue(){return E(this.internalValue)},internalValue:{get(){return this.lazyValue},set(e){this.lazyValue=e,this.$emit("change",this.lazyValue)}},isDirty(){return this.internalArrayValue.length>0},isLabelActive(){return this.isDirty},text(){return!this.isDirty&&(this.persistentPlaceholder||this.isFocused||!this.hasLabel)?[this.placeholder]:this.internalArrayValue.map(e=>{const{name:t="",size:i=0}=e,s=this.truncateText(t);return this.showSize?`${s} (${ie(i,this.base===1024)})`:s})},base(){return typeof this.showSize!="boolean"?this.showSize:void 0},hasChips(){return this.chips||this.smallChips}},watch:{readonly:{handler(e){e===!0&&Re("readonly is not supported on <v-file-input>",this)},immediate:!0},value(e){const t=this.multiple?e:e?[e]:[];q(t,this.$refs.input.files)||(this.$refs.input.value="")}},methods:{clearableCallback(){this.internalValue=this.multiple?[]:null,this.$refs.input.value=""},genChips(){return this.isDirty?this.text.map((e,t)=>this.$createElement(fe,{props:{small:this.smallChips},on:{"click:close":()=>{const i=this.internalValue;i.splice(t,1),this.internalValue=i}}},[e])):[]},genControl(){const e=y.options.methods.genControl.call(this);return this.hideInput&&(e.data.style=je(e.data.style,{display:"none"})),e},genInput(){const e=y.options.methods.genInput.call(this);return e.data.attrs.multiple=this.multiple,delete e.data.domProps.value,delete e.data.on.input,e.data.on.change=this.onInput,[this.genSelections(),e]},genPrependSlot(){if(!this.prependIcon)return null;const e=this.genIcon("prepend",()=>{this.$refs.input.click()});return this.genSlot("prepend","outer",[e])},genSelectionText(){const e=this.text.length;return e<2?this.text:this.showSize&&!this.counter?[this.computedCounterValue]:[this.$vuetify.lang.t(this.counterString,e)]},genSelections(){const e=[];return this.isDirty&&this.$scopedSlots.selection?this.internalArrayValue.forEach((t,i)=>{!this.$scopedSlots.selection||e.push(this.$scopedSlots.selection({text:this.text[i],file:t,index:i}))}):e.push(this.hasChips&&this.isDirty?this.genChips():this.genSelectionText()),this.$createElement("div",{staticClass:"v-file-input__text",class:{"v-file-input__text--placeholder":this.placeholder&&!this.isDirty,"v-file-input__text--chips":this.hasChips&&!this.$scopedSlots.selection}},e)},genTextFieldSlot(){const e=y.options.methods.genTextFieldSlot.call(this);return e.data.on={...e.data.on||{},click:t=>{t.target&&t.target.nodeName==="LABEL"||this.$refs.input.click()}},e},onInput(e){const t=[...e.target.files||[]];this.internalValue=this.multiple?t:t[0],this.initialValue=this.internalValue},onKeyDown(e){this.$emit("keydown",e)},truncateText(e){if(e.length<Number(this.truncateLength))return e;const t=Math.floor((Number(this.truncateLength)-1)/2);return`${e.slice(0,t)}\u2026${e.slice(e.length-t)}`}}});const Nt=g(be,k),Yt=Nt.extend({name:"v-radio-group",provide(){return{radioGroup:this}},props:{column:{type:Boolean,default:!0},height:{type:[Number,String],default:"auto"},name:String,row:Boolean,value:null},computed:{classes(){return{...k.options.computed.classes.call(this),"v-input--selection-controls v-input--radio-group":!0,"v-input--radio-group--column":this.column&&!this.row,"v-input--radio-group--row":this.row}}},methods:{genDefaultSlot(){return this.$createElement("div",{staticClass:"v-input--radio-group__input",attrs:{id:this.id,role:"radiogroup","aria-labelledby":this.computedId}},k.options.methods.genDefaultSlot.call(this))},genInputSlot(){const e=k.options.methods.genInputSlot.call(this);return delete e.data.on.click,e},genLabel(){const e=k.options.methods.genLabel.call(this);return e?(e.data.attrs.id=this.computedId,delete e.data.attrs.for,e.tag="legend",e):null},onClick:be.options.methods.onClick},render(e){const t=k.options.render.call(this,e);return this._b(t.data,"div",this.attrs$),t}});const Rt=g(Ge,x,He,Ke("radioGroup"),D),ne=Rt.extend().extend({name:"v-radio",inheritAttrs:!1,props:{disabled:Boolean,id:String,label:String,name:String,offIcon:{type:String,default:"$radioOff"},onIcon:{type:String,default:"$radioOn"},readonly:Boolean,value:{default:null}},data:()=>({isFocused:!1}),computed:{classes(){return{"v-radio--is-disabled":this.isDisabled,"v-radio--is-focused":this.isFocused,...this.themeClasses,...this.groupClasses}},computedColor(){if(!this.isDisabled)return Y.options.computed.computedColor.call(this)},computedIcon(){return this.isActive?this.onIcon:this.offIcon},computedId(){return k.options.computed.computedId.call(this)},hasLabel:k.options.computed.hasLabel,hasState(){return(this.radioGroup||{}).hasState},isDisabled(){return this.disabled||!!this.radioGroup&&this.radioGroup.isDisabled},isReadonly(){return this.readonly||!!this.radioGroup&&this.radioGroup.isReadonly},computedName(){return this.name||!this.radioGroup?this.name:this.radioGroup.name||`radio-${this.radioGroup._uid}`},rippleState(){return Y.options.computed.rippleState.call(this)},validationState(){return(this.radioGroup||{}).validationState||this.computedColor}},methods:{genInput(e){return Y.options.methods.genInput.call(this,"radio",e)},genLabel(){return this.hasLabel?this.$createElement(Ue,{on:{click:We},attrs:{for:this.computedId},props:{color:this.validationState,focused:this.hasState}},qe(this,"label")||this.label):null},genRadio(){const{title:e,...t}=this.attrs$;return this.$createElement("div",{staticClass:"v-input--selection-controls__input"},[this.$createElement(f,this.setTextColor(this.validationState,{props:{dense:this.radioGroup&&this.radioGroup.dense}}),this.computedIcon),this.genInput({name:this.computedName,value:this.value,...t}),this.genRipple(this.setTextColor(this.rippleState))])},onFocus(e){this.isFocused=!0,this.$emit("focus",e)},onBlur(e){this.isFocused=!1,this.$emit("blur",e)},onChange(){this.isDisabled||this.isReadonly||this.isActive||this.toggle()},onKeydown:()=>{}},render(e){const t={staticClass:"v-radio",class:this.classes,on:G({click:this.onChange},this.listeners$),attrs:{title:this.attrs$.title}};return e("div",t,[this.genRadio(),this.genLabel()])}});const jt=g(x,Ze("treeview")),Se={activatable:Boolean,activeClass:{type:String,default:"v-treeview-node--active"},color:{type:String,default:"primary"},disablePerNode:Boolean,expandIcon:{type:String,default:"$subgroup"},indeterminateIcon:{type:String,default:"$checkboxIndeterminate"},itemChildren:{type:String,default:"children"},itemDisabled:{type:String,default:"disabled"},itemKey:{type:String,default:"id"},itemText:{type:String,default:"name"},loadChildren:Function,loadingIcon:{type:String,default:"$loading"},offIcon:{type:String,default:"$checkboxOff"},onIcon:{type:String,default:"$checkboxOn"},openOnClick:Boolean,rounded:Boolean,selectable:Boolean,selectedColor:{type:String,default:"accent"},shaped:Boolean,transition:Boolean,selectionType:{type:String,default:"leaf",validator:e=>["leaf","independent"].includes(e)}},Ce=jt.extend().extend({name:"v-treeview-node",inject:{treeview:{default:null}},props:{level:Number,item:{type:Object,default:()=>null},parentIsDisabled:Boolean,...Se},data:()=>({hasLoaded:!1,isActive:!1,isIndeterminate:!1,isLoading:!1,isOpen:!1,isSelected:!1}),computed:{disabled(){return h(this.item,this.itemDisabled)||!this.disablePerNode&&this.parentIsDisabled&&this.selectionType==="leaf"},key(){return h(this.item,this.itemKey)},children(){const e=h(this.item,this.itemChildren);return e&&e.filter(t=>!this.treeview.isExcluded(h(t,this.itemKey)))},text(){return h(this.item,this.itemText)},scopedProps(){return{item:this.item,leaf:!this.children,selected:this.isSelected,indeterminate:this.isIndeterminate,active:this.isActive,open:this.isOpen}},computedIcon(){return this.isIndeterminate?this.indeterminateIcon:this.isSelected?this.onIcon:this.offIcon},hasChildren(){return!!this.children&&(!!this.children.length||!!this.loadChildren)}},created(){this.treeview.register(this)},beforeDestroy(){this.treeview.unregister(this)},methods:{checkChildren(){return new Promise(e=>{if(!this.children||this.children.length||!this.loadChildren||this.hasLoaded)return e();this.isLoading=!0,e(this.loadChildren(this.item))}).then(()=>{this.isLoading=!1,this.hasLoaded=!0})},open(){this.isOpen=!this.isOpen,this.treeview.updateOpen(this.key,this.isOpen),this.treeview.emitOpen()},genLabel(){const e=[];return this.$scopedSlots.label?e.push(this.$scopedSlots.label(this.scopedProps)):e.push(this.text),this.$createElement("div",{slot:"label",staticClass:"v-treeview-node__label"},e)},genPrependSlot(){return this.$scopedSlots.prepend?this.$createElement("div",{staticClass:"v-treeview-node__prepend"},this.$scopedSlots.prepend(this.scopedProps)):null},genAppendSlot(){return this.$scopedSlots.append?this.$createElement("div",{staticClass:"v-treeview-node__append"},this.$scopedSlots.append(this.scopedProps)):null},genContent(){const e=[this.genPrependSlot(),this.genLabel(),this.genAppendSlot()];return this.$createElement("div",{staticClass:"v-treeview-node__content"},e)},genToggle(){return this.$createElement(f,{staticClass:"v-treeview-node__toggle",class:{"v-treeview-node__toggle--open":this.isOpen,"v-treeview-node__toggle--loading":this.isLoading},slot:"prepend",on:{click:e=>{e.stopPropagation(),!this.isLoading&&this.checkChildren().then(()=>this.open())}}},[this.isLoading?this.loadingIcon:this.expandIcon])},genCheckbox(){return this.$createElement(f,{staticClass:"v-treeview-node__checkbox",props:{color:this.isSelected||this.isIndeterminate?this.selectedColor:void 0,disabled:this.disabled},on:{click:e=>{e.stopPropagation(),!this.isLoading&&this.checkChildren().then(()=>{this.$nextTick(()=>{this.isSelected=!this.isSelected,this.isIndeterminate=!1,this.treeview.updateSelected(this.key,this.isSelected),this.treeview.emitSelected()})})}}},[this.computedIcon])},genLevel(e){return W(e).map(()=>this.$createElement("div",{staticClass:"v-treeview-node__level"}))},genNode(){const e=[this.genContent()];return this.selectable&&e.unshift(this.genCheckbox()),this.hasChildren?e.unshift(this.genToggle()):e.unshift(...this.genLevel(1)),e.unshift(...this.genLevel(this.level)),this.$createElement("div",this.setTextColor(this.isActive&&this.color,{staticClass:"v-treeview-node__root",class:{[this.activeClass]:this.isActive},on:{click:()=>{this.openOnClick&&this.hasChildren?this.checkChildren().then(this.open):this.activatable&&!this.disabled&&(this.isActive=!this.isActive,this.treeview.updateActive(this.key,this.isActive),this.treeview.emitActive())}}}),e)},genChild(e,t){return this.$createElement(Ce,{key:h(e,this.itemKey),props:{activatable:this.activatable,activeClass:this.activeClass,item:e,selectable:this.selectable,selectedColor:this.selectedColor,color:this.color,disablePerNode:this.disablePerNode,expandIcon:this.expandIcon,indeterminateIcon:this.indeterminateIcon,offIcon:this.offIcon,onIcon:this.onIcon,loadingIcon:this.loadingIcon,itemKey:this.itemKey,itemText:this.itemText,itemDisabled:this.itemDisabled,itemChildren:this.itemChildren,loadChildren:this.loadChildren,transition:this.transition,openOnClick:this.openOnClick,rounded:this.rounded,shaped:this.shaped,level:this.level+1,selectionType:this.selectionType,parentIsDisabled:t},scopedSlots:this.$scopedSlots})},genChildrenWrapper(){if(!this.isOpen||!this.children)return null;const e=[this.children.map(t=>this.genChild(t,this.disabled))];return this.$createElement("div",{staticClass:"v-treeview-node__children"},e)},genTransition(){return this.$createElement(Je,[this.genChildrenWrapper()])}},render(e){const t=[this.genNode()];return this.transition?t.push(this.genTransition()):t.push(this.genChildrenWrapper()),e("div",{staticClass:"v-treeview-node",class:{"v-treeview-node--leaf":!this.hasChildren,"v-treeview-node--click":this.openOnClick,"v-treeview-node--disabled":this.disabled,"v-treeview-node--rounded":this.rounded,"v-treeview-node--shaped":this.shaped,"v-treeview-node--selected":this.isSelected},attrs:{"aria-expanded":String(this.isOpen)}},t)}}),Ut=Ce;function Wt(e,t,i){return h(e,i).toLocaleLowerCase().indexOf(t.toLocaleLowerCase())>-1}function Te(e,t,i,s,n,a,r){if(e(t,i,n))return!0;const l=h(t,a);if(l){let o=!1;for(let c=0;c<l.length;c++)Te(e,l[c],i,s,n,a,r)&&(o=!0);if(o)return!0}return r.add(h(t,s)),!1}const qt=g(Xe("treeview"),D).extend({name:"v-treeview",provide(){return{treeview:this}},props:{active:{type:Array,default:()=>[]},dense:Boolean,disabled:Boolean,filter:Function,hoverable:Boolean,items:{type:Array,default:()=>[]},multipleActive:Boolean,open:{type:Array,default:()=>[]},openAll:Boolean,returnObject:{type:Boolean,default:!1},search:String,value:{type:Array,default:()=>[]},...Se},data:()=>({level:-1,activeCache:new Set,nodes:{},openCache:new Set,selectedCache:new Set}),computed:{excludedItems(){const e=new Set;if(!this.search)return e;for(let t=0;t<this.items.length;t++)Te(this.filter||Wt,this.items[t],this.search,this.itemKey,this.itemText,this.itemChildren,e);return e}},watch:{items:{handler(){const e=Object.keys(this.nodes).map(n=>h(this.nodes[n].item,this.itemKey)),t=this.getKeys(this.items),i=Qe(t,e);if(!i.length&&t.length<e.length)return;i.forEach(n=>delete this.nodes[n]);const s=[...this.selectedCache];this.selectedCache=new Set,this.activeCache=new Set,this.openCache=new Set,this.buildTree(this.items),q(s,[...this.selectedCache])||this.emitSelected()},deep:!0},active(e){this.handleNodeCacheWatcher(e,this.activeCache,this.updateActive,this.emitActive)},value(e){this.handleNodeCacheWatcher(e,this.selectedCache,this.updateSelected,this.emitSelected)},open(e){this.handleNodeCacheWatcher(e,this.openCache,this.updateOpen,this.emitOpen)}},created(){const e=t=>this.returnObject?h(t,this.itemKey):t;this.buildTree(this.items);for(const t of this.value.map(e))this.updateSelected(t,!0,!0);for(const t of this.active.map(e))this.updateActive(t,!0)},mounted(){(this.$slots.prepend||this.$slots.append)&&de("The prepend and append slots require a slot-scope attribute",this),this.openAll?this.updateAll(!0):(this.open.forEach(e=>this.updateOpen(this.returnObject?h(e,this.itemKey):e,!0)),this.emitOpen())},methods:{updateAll(e){Object.keys(this.nodes).forEach(t=>this.updateOpen(h(this.nodes[t].item,this.itemKey),e)),this.emitOpen()},getKeys(e,t=[]){for(let i=0;i<e.length;i++){const s=h(e[i],this.itemKey);t.push(s);const n=h(e[i],this.itemChildren);n&&t.push(...this.getKeys(n))}return t},buildTree(e,t=null){var i;for(let s=0;s<e.length;s++){const n=e[s],a=h(n,this.itemKey),r=(i=h(n,this.itemChildren))!==null&&i!==void 0?i:[],l=this.nodes.hasOwnProperty(a)?this.nodes[a]:{isSelected:!1,isIndeterminate:!1,isActive:!1,isOpen:!1,vnode:null},o={vnode:l.vnode,parent:t,children:r.map(c=>h(c,this.itemKey)),item:n};if(this.buildTree(r,a),this.selectionType!=="independent"&&t!==null&&!this.nodes.hasOwnProperty(a)&&this.nodes.hasOwnProperty(t)?o.isSelected=this.nodes[t].isSelected:(o.isSelected=l.isSelected,o.isIndeterminate=l.isIndeterminate),o.isActive=l.isActive,o.isOpen=l.isOpen,this.nodes[a]=o,r.length&&this.selectionType!=="independent"){const{isSelected:c,isIndeterminate:_}=this.calculateState(a,this.nodes);o.isSelected=c,o.isIndeterminate=_}this.nodes[a].isSelected&&(this.selectionType==="independent"||o.children.length===0)&&this.selectedCache.add(a),this.nodes[a].isActive&&this.activeCache.add(a),this.nodes[a].isOpen&&this.openCache.add(a),this.updateVnodeState(a)}},calculateState(e,t){const i=t[e].children,s=i.reduce((r,l)=>(r[0]+=+Boolean(t[l].isSelected),r[1]+=+Boolean(t[l].isIndeterminate),r),[0,0]),n=!!i.length&&s[0]===i.length,a=!n&&(s[0]>0||s[1]>0);return{isSelected:n,isIndeterminate:a}},emitOpen(){this.emitNodeCache("update:open",this.openCache)},emitSelected(){this.emitNodeCache("input",this.selectedCache)},emitActive(){this.emitNodeCache("update:active",this.activeCache)},emitNodeCache(e,t){this.$emit(e,this.returnObject?[...t].map(i=>this.nodes[i].item):[...t])},handleNodeCacheWatcher(e,t,i,s){e=this.returnObject?e.map(a=>h(a,this.itemKey)):e;const n=[...t];q(n,e)||(n.forEach(a=>i(a,!1)),e.forEach(a=>i(a,!0)),s())},getDescendants(e,t=[]){const i=this.nodes[e].children;t.push(...i);for(let s=0;s<i.length;s++)t=this.getDescendants(i[s],t);return t},getParents(e){let t=this.nodes[e].parent;const i=[];for(;t!==null;)i.push(t),t=this.nodes[t].parent;return i},register(e){const t=h(e.item,this.itemKey);this.nodes[t].vnode=e,this.updateVnodeState(t)},unregister(e){const t=h(e.item,this.itemKey);this.nodes[t]&&(this.nodes[t].vnode=null)},isParent(e){return this.nodes[e].children&&this.nodes[e].children.length},updateActive(e,t){if(!this.nodes.hasOwnProperty(e))return;this.multipleActive||this.activeCache.forEach(s=>{this.nodes[s].isActive=!1,this.updateVnodeState(s),this.activeCache.delete(s)});const i=this.nodes[e];!i||(t?this.activeCache.add(e):this.activeCache.delete(e),i.isActive=t,this.updateVnodeState(e))},updateSelected(e,t,i=!1){if(!this.nodes.hasOwnProperty(e))return;const s=new Map;if(this.selectionType!=="independent"){for(const a of this.getDescendants(e))(!h(this.nodes[a].item,this.itemDisabled)||i)&&(this.nodes[a].isSelected=t,this.nodes[a].isIndeterminate=!1,s.set(a,t));const n=this.calculateState(e,this.nodes);this.nodes[e].isSelected=t,this.nodes[e].isIndeterminate=n.isIndeterminate,s.set(e,t);for(const a of this.getParents(e)){const r=this.calculateState(a,this.nodes);this.nodes[a].isSelected=r.isSelected,this.nodes[a].isIndeterminate=r.isIndeterminate,s.set(a,r.isSelected)}}else this.nodes[e].isSelected=t,this.nodes[e].isIndeterminate=!1,s.set(e,t);for(const[n,a]of s.entries())this.updateVnodeState(n),!(this.selectionType==="leaf"&&this.isParent(n))&&(a===!0?this.selectedCache.add(n):this.selectedCache.delete(n))},updateOpen(e,t){if(!this.nodes.hasOwnProperty(e))return;const i=this.nodes[e],s=h(i.item,this.itemChildren);s&&!s.length&&i.vnode&&!i.vnode.hasLoaded?i.vnode.checkChildren().then(()=>this.updateOpen(e,t)):s&&s.length&&(i.isOpen=t,i.isOpen?this.openCache.add(e):this.openCache.delete(e),this.updateVnodeState(e))},updateVnodeState(e){const t=this.nodes[e];t&&t.vnode&&(t.vnode.isSelected=t.isSelected,t.vnode.isIndeterminate=t.isIndeterminate,t.vnode.isActive=t.isActive,t.vnode.isOpen=t.isOpen)},isExcluded(e){return!!this.search&&this.excludedItems.has(e)}},render(e){const t=this.items.length?this.items.filter(i=>!this.isExcluded(h(i,this.itemKey))).map(i=>Ut.options.methods.genChild.bind(this)(i,this.disabled||h(i,this.itemDisabled))):this.$slots.default;return e("div",{staticClass:"v-treeview",class:{"v-treeview--hoverable":this.hoverable,"v-treeview--dense":this.dense,...this.themeClasses}},t)}});const Kt={components:{},props:{editable:{type:Boolean,default:!0},label:{type:String,required:!0},value:{type:[String,Number],default:""},dataType:{type:String,default:"string"},suggestedValues:{type:Array,default:()=>[]},strict:{type:Boolean,default:!1},rules:{type:Array,default:()=>[]}},data(){return{internalValue:this.value,editing:!1,menu:!1,original:"",moment:K}},computed:{dirty(){return this.original!==this.internalValue},...et({isDarkMode:"application/isDarkMode"})},watch:{internalValue(e){this.$emit("input",e)}},mounted(){this.original=this.value},methods:{clicked(){!this.editable||(this.editing=!0,this.$nextTick(()=>{this.dataType==="date"||this.dataType==="date-range"?this.menu=!0:this.$refs.field.focus()}))},async update(){this.$refs.field.validate&&this.$refs.field.validate()===!1||(this.label==="Delay"?this.internalValue=Math.floor(this.internalValue):this.label==="Jitter"&&(this.internalValue=Math.floor(this.internalValue*10)/10),await this.$nextTick(),this.editing=!1,this.$emit("update"))},revert(){this.editing=!1,this.internalValue=this.original},async clear(){this.internalValue="",await this.$nextTick(),this.editing=!1,this.$emit("update")},getColClass(){return this.editing===!1&&this.editable===!0?this.isDarkMode?"column-not-editing-dark":"column-not-editing":""}}};var Ht=function(){var t=this,i=t._self._c;return i(z,{staticClass:"pb-5"},[i(C,{attrs:{cols:"4"}},[i("span",{staticClass:"text--bold"},[t._v(t._s(t.label))])]),i(C,{class:t.getColClass(),attrs:{cols:"6"},on:{click:t.clicked}},[t.editing&&t.editable?[t.suggestedValues.length>0&&t.strict?i(me,{ref:"field",attrs:{items:t.suggestedValues,label:t.label,outlined:"",dense:""},on:{blur:t.update,keyup:function(s){return!s.type.indexOf("key")&&t._k(s.keyCode,"enter",13,s.key,"Enter")?null:t.update.apply(null,arguments)}},model:{value:t.internalValue,callback:function(s){t.internalValue=s},expression:"internalValue"}}):t.dataType==="date"||t.dataType==="date-range"?i(ge,{ref:"menu",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:n}){return[i(y,t._g(t._b({ref:"field",attrs:{label:"Picker in menu","prepend-icon":"mdi-calendar",readonly:"",clearable:""},on:{"click:clear":t.clear},model:{value:t.internalValue,callback:function(a){t.internalValue=a},expression:"internalValue"}},"v-text-field",n,!1),s))]}}],null,!1,2992141911),model:{value:t.menu,callback:function(s){t.menu=s},expression:"menu"}},[i(Lt,{attrs:{outlined:"",dense:"",range:t.dataType==="date-range",min:t.moment().format("YYYY-MM-DD")},on:{blur:t.update,keyup:function(s){return!s.type.indexOf("key")&&t._k(s.keyCode,"enter",13,s.key,"Enter")?null:t.update.apply(null,arguments)}},model:{value:t.internalValue,callback:function(s){t.internalValue=s},expression:"internalValue"}},[i(P),i(v,{attrs:{text:"",color:"primary"},on:{click:function(s){t.menu=!1,t.editing=!1,t.revert()}}},[t._v(" Cancel ")]),i(v,{attrs:{text:"",color:"primary"},on:{click:function(s){t.menu=!1,t.update()}}},[t._v(" OK ")])],1)],1):t.dataType==="string"||t.dataType==="number"?i(y,{ref:"field",staticStyle:{"margin-bottom":"-45px"},attrs:{rules:t.rules,label:t.label,type:t.dataType==="string"?"text":"number",step:t.label==="Jitter"?"0.1":"1",max:t.label==="Jitter"?"1":"",min:"0",outlined:"",dense:"",required:""},on:{blur:t.update,keyup:function(s){return!s.type.indexOf("key")&&t._k(s.keyCode,"enter",13,s.key,"Enter")?null:t.update.apply(null,arguments)}},model:{value:t.internalValue,callback:function(s){t.internalValue=s},expression:"internalValue"}}):t._e()]:i("span",{staticClass:"ml-3"},[t._v(" "+t._s(t.internalValue)+" ")])],2)],1)},Gt=[],Zt=S(Kt,Ht,Gt,!1,null,null,null,null);const u=Zt.exports;const Jt={components:{ClickToEdit:u},props:{agent:{type:Object,required:!0},readOnly:{type:Boolean,default:!1}},data(){return{valid:!0,nameLoading:!1,loading:!1,labelPosition:"left",rules:{},form:{},moment:K,workingHoursRules:[e=>/^[0-9]{1,2}:[0-5][0-9]-[0-9]{1,2}:[0-5][0-9]$/.test(e)||"Must be in the format 00:00-24:00"],nameRules:[e=>!!e||"Name is required",e=>!!e&&e.length>2||"Name must be at least 3 characters"],jitterRules:[e=>!Number.isNaN(e)||"Jitter must be a number",e=>e>=0&&e<=1||"Jitter must be between 0 and 1"],delayRules:[e=>!Number.isNaN(e)||"Delay must be a number",e=>e>=0||"Delay must be a positive number"]}},computed:{...tt({listeners:e=>e.listener.listeners}),fields(){return Object.keys(this.agent).map(e=>({name:e,Value:typeof this.agent[e]=="boolean"?`${this.agent[e]}`:this.agent[e]}))},requiredFields(){return this.fields.filter(e=>["name"].indexOf(e.name)<0)}},watch:{fields:{immediate:!0,handler(e){const t=e.reduce((i,s)=>{if(s.name==="kill_date"&&s.Value&&s.Value.length>0){const n=s.Value.split("/"),a=n[2],r=n[0],l=n[1];i[s.name]=`${a}-${r}-${l}`}else i[s.name]=s.Value;return i},{});I.set(this,"form",t)}}},mounted(){this.$store.dispatch("listener/getListeners")},methods:{async updateName(){if(this.agent.name!==this.form.name){try{await this.$store.dispatch("agent/rename",{sessionId:this.agent.session_id,newName:this.form.name})}catch(e){this.$snack.error(`Update agent listener failed: ${e}`);return}this.$snack.info(`Agent ${this.agent.name} name updated`)}},async updateListener(){if(this.agent.listener!==this.form.listener){try{const e=this.listeners.filter(t=>t.name===this.form.listener)[0].id;await it(this.agent.session_id,e)}catch(e){this.$snack.error(`Update agent listener failed: ${e}`);return}this.$snack.info(`Tasked agent to change listener to: ${this.form.listener}`),await this.$store.dispatch("agent/getAgent",{sessionId:this.form.name})}},async updateKillDate(){let e="";if(this.form.kill_date&&this.form.kill_date.length>0&&(e=K(this.form.kill_date).format("MM/DD/YYYY")),this.agent.kill_date!==e){try{await st(this.agent.session_id,e)}catch(t){this.$snack.error(`Update agent kill date failed: ${t}`);return}this.$snack.info(`Tasked agent to change kill date to: ${e}`),this.$store.dispatch("agent/getAgent",{sessionId:this.form.name})}},async updateWorkingHours(){if(this.agent.working_hours!==this.form.working_hours){try{await nt(this.agent.session_id,this.form.working_hours)}catch(e){this.$snack.error(`Update agent working hours failed: ${e}`);return}this.$snack.info(`Tasked agent to change working hours to: ${this.form.working_hours}`)}},async updateDelay(){if(this.agent.delay!==this.form.delay){try{await se(this.agent.session_id,this.form.delay,this.form.jitter)}catch(e){this.$snack.error(`Update agent delay failed: ${e}`);return}this.$snack.info(`Tasked agent to change delay to: ${this.form.delay}`)}},async updateJitter(){if(this.agent.jitter!==this.form.jitter){try{await se(this.agent.session_id,this.form.delay,this.form.jitter)}catch(e){this.$snack.error(`Update agent delay failed: ${e}`);return}this.$snack.info(`Tasked agent to change jitter to: ${this.form.jitter}`)}},fieldExists(e){return this.fields.filter(t=>t.name===e).length>0}}};var Xt=function(){var t=this,i=t._self._c;return i("div",{staticStyle:{padding:"10px"}},[t.agent.session_id?i(B,{ref:"form",model:{value:t.valid,callback:function(s){t.valid=s},expression:"valid"}},[i(u,{attrs:{label:"Session ID",editable:!1,value:t.form.session_id}}),i(u,{attrs:{label:"Name",rules:t.nameRules,editable:!t.readOnly},on:{update:t.updateName},model:{value:t.form.name,callback:function(s){t.$set(t.form,"name",s)},expression:"form.name"}}),i(u,{attrs:{label:"External IP",value:t.form.external_ip,editable:!1}}),i(u,{attrs:{label:"Internal IP",value:t.form.internal_ip,editable:!1}}),i(u,{attrs:{label:"Host Name",value:t.form.hostname,editable:!1}}),i(u,{attrs:{label:"Username",value:t.form.username,editable:!1}}),i(u,{attrs:{label:"Listener","data-type":"string","suggested-values":t.listeners.map(s=>s.name),strict:!0,editable:!t.readOnly},on:{update:t.updateListener},model:{value:t.form.listener,callback:function(s){t.$set(t.form,"listener",s)},expression:"form.listener"}}),i(u,{attrs:{label:"Kill Date","data-type":"date",editable:!t.readOnly},on:{update:t.updateKillDate},model:{value:t.form.kill_date,callback:function(s){t.$set(t.form,"kill_date",s)},expression:"form.kill_date"}}),i(u,{attrs:{label:"Working Hours",rules:t.workingHoursRules,editable:!t.readOnly},on:{update:t.updateWorkingHours},model:{value:t.form.working_hours,callback:function(s){t.$set(t.form,"working_hours",s)},expression:"form.working_hours"}}),i(u,{attrs:{label:"Check In Time",value:t.moment(t.form.checkin_time).fromNow(),editable:!1}}),i(u,{attrs:{label:"Last Seen Time",value:t.moment(t.form.lastseen_time).fromNow(),editable:!1}}),i(u,{attrs:{label:"Delay","data-type":"number",rules:t.delayRules,editable:!t.readOnly},on:{update:t.updateDelay},model:{value:t.form.delay,callback:function(s){t.$set(t.form,"delay",s)},expression:"form.delay"}}),i(u,{attrs:{label:"Jitter","data-type":"number",rules:t.jitterRules,editable:!t.readOnly},on:{update:t.updateJitter},model:{value:t.form.jitter,callback:function(s){t.$set(t.form,"jitter",s)},expression:"form.jitter"}}),i(u,{attrs:{label:"Lost Limit","data-type":"number",editable:!1},model:{value:t.form.lost_limit,callback:function(s){t.$set(t.form,"lost_limit",s)},expression:"form.lost_limit"}}),i(u,{attrs:{label:"OS Details",value:t.form.os_details,editable:!1}}),i(u,{attrs:{label:"Architecture",value:t.form.architecture,editable:!1}}),i(u,{attrs:{label:"Process ID",value:t.form.process_id,editable:!1}}),i(u,{attrs:{label:"Process Name",value:t.form.process_name,editable:!1}}),i(u,{attrs:{label:"Language",value:t.form.language,editable:!1}}),i(u,{attrs:{label:"Language Version",value:t.form.language_version,editable:!1}}),i(u,{attrs:{label:"Profile",value:t.form.profile,editable:!1}})],1):t._e()],1)},Qt=[],ei=S(Jt,Xt,Qt,!1,null,"94fe5ddd",null,null);const De=ei.exports,ti={components:{AgentExecuteModule:V},props:{value:Boolean,loading:{type:Boolean,default:!1},agent:{type:String,required:!0},moduleName:{type:String,required:!0},moduleOptionDefaults:{type:Object,default:()=>{}}},data(){return{}},computed:{show:{get(){return this.value},set(e){this.$emit("input",e)}}},methods:{async submit(){!this.$refs.executeform.validate()||(this.$refs.executeform.create(),this.show=!1)}}};var ii=function(){var t=this,i=t._self._c;return i(Z,{ref:"downloadDialog",attrs:{"max-width":"800px"},model:{value:t.show,callback:function(s){t.show=s},expression:"show"}},[i($,[i(J,[i("span",{staticClass:"headline"})]),i(L,[t.show?i(V,{ref:"executeform",attrs:{agents:[t.agent],"module-name":t.moduleName,"module-option-defaults":t.moduleOptionDefaults,"show-submit":!1},on:{submitted:t.submit}}):t._e()],1),i(X,[i(P),i(v,{attrs:{color:"error",text:""},on:{click:function(s){s.stopPropagation(),t.show=!1}}},[t._v(" Close ")]),i(v,{attrs:{color:"primary",loading:t.loading},on:{click:t.submit}},[t._v(" Submit ")])],1)],1)],1)},si=[],ni=S(ti,ii,si,!1,null,null,null,null);const Pe=ni.exports;async function ae(e=1e3){return new Promise(t=>setTimeout(t,e))}const ai={components:{ExecuteModuleDialog:Pe},props:{agent:{type:Object,required:!0},readOnly:{type:Boolean,default:!1}},data(){return{files:{html:"mdi-language-html5",js:"mdi-nodejs",json:"mdi-json",md:"mdi-markdown",pdf:"mdi-file-pdf",png:"mdi-file-image",txt:"mdi-file-document-outline",xls:"mdi-file-excel",xlsx:"mdi-file-excel",ppt:"mdi-file-powerpoint",pptx:"mdi-file-powerpoint",jpg:"mdi-file-image",jpeg:"mdi-file-image",gif:"mdi-file-image",doc:"mdi-file-word",docx:"mdi-file-word"},tree:[],open:[],showMenu:!1,menuPosition:{x:0,y:0},selected:{},force:{},currentlyLoading:{},loading:!1,debouncedLoadChildren:null,executeDialog:!1,moduleName:"",moduleOptionDefaults:{}}},computed:{menuItems(){return[{id:"close",name:"Close",fileOption:!1,folderOption:!0},{id:"open",name:"Open",fileOption:!1,folderOption:!0},{id:"refresh",name:"Refresh",fileOption:!1,folderOption:!0},{id:"download",name:"Download to Empire",fileOption:!0,folderOption:!1},{id:"zip",name:"Zip Folder",fileOption:!1,folderOption:!0},{id:"upload",name:"Upload",folderOption:!0,fileOption:!1}].filter(e=>this.selected.file?e.fileOption===!0:e.folderOption===!0).filter(e=>!(e.id==="zip"&&this.agent.language!=="powershell")).filter(e=>{if(e.id==="open"){if(this.open.find(t=>t===this.selected.id))return!1}else if((e.id==="close"||e.id==="refresh")&&!this.open.find(t=>t===this.selected.id))return!1;return!0})}},watch:{agent:{handler(){this.initialize()}}},async mounted(){this.agent&&this.initialize()},methods:{async initialize(){this.debouncedLoadChildren=vt(this.loadChildren,500,{leading:!0}),this.loading=!0;try{const e=await R(this.agent.session_id,"/");e.sort(this.sortFiles),this.tree=e.map(t=>this.transform(t))}catch{if(this.readOnly){this.loading=!1;return}const t=await this.scrapeDirectory("/");let i=0,s=0;for(;i<10;){if(await ae(6e3),await this.checkTaskComplete(t.id)){s=!0;break}i++}s||this.$snack.error("Agent didn't respond in time. Please try again later.");const n=await R(this.agent.session_id,"/");n.sort(this.sortFiles),this.tree=n.map(a=>this.transform(a))}this.loading=!1},async clickAction(e){if(e==="open")this.open.push(this.selected.id);else if(e==="close")this.open.splice(this.open.findIndex(t=>t===this.selected.id),1);else if(e==="refresh"){this.selected.children=[];const t=this.$refs.treeview.nodes[this.selected.id];this.open.splice(this.open.findIndex(i=>i===this.selected.id),1),await I.nextTick(),t.vnode.hasLoaded=!1,this.force[this.selected.id]=!0,await I.nextTick(),this.open.push(this.selected.id)}else e==="download"?(ce(this.agent.session_id,this.selected.path),this.$snack.success(`Tasked ${this.agent.session_id} for download ${this.selected.path}`)):e==="zip"?this.prepareZip():e==="upload"&&this.$emit("openUploadDialog",{pathToFile:this.selected.path})},prepareZip(){const e={agent:this.agent.session_id,Folder:this.selected.path,ZipFileName:`${this.selected.path}\\${this.selected.path.split("\\").pop()}.zip`};this.moduleName="powershell/management/zipfolder",this.moduleOptionDefaults=e,this.executeDialog=!0},show(e,t){t.preventDefault(),this.showMenu=!1,this.menuPosition.x=t.clientX,this.menuPosition.y=t.clientY,this.selected=e,this.$nextTick(()=>{this.showMenu=!0})},transform(e){return{file:e.is_file===!0?e.name.split(".").pop():!1,...e,children:e.is_file===!1?[]:void 0}},async loadChildren(e,{stopTrying:t}={}){if(this.currentlyLoading[e.id])return Promise.resolve();this.currentlyLoading[e.id]=!0;const i=await R(this.agent.session_id,e.id);if(i.sort(this.sortFiles),!this.force[e.id]&&i.length>0)return this.removeFromCurrentlyLoading(e.id),e.children=i.map(s=>this.transform(s)),Promise.resolve();if(!t&&!this.readOnly){console.log(t,this.readOnly),this.$snack.success(`Attempting to retrieve directory: ${e.path} with id ${e.id}`);const s=await this.scrapeDirectory(e.path);let n=0,a=!1;for(;n<10;){if(await ae(6e3),await this.checkTaskComplete(s.id)){console.log("task complete",s.id),a=!0;break}n++}return a||this.$snack.error("Agent didn't respond in time. Please try again later."),this.removeFromForce(e.id),this.removeFromCurrentlyLoading(e.id),Promise.resolve(this.loadChildren(e,{stopTrying:!0}))}return this.removeFromForce(e.id),this.removeFromCurrentlyLoading(e.id),Promise.resolve()},removeFromForce(e){this.force[e]&&delete this.force[e]},removeFromCurrentlyLoading(e){this.currentlyLoading[e]&&delete this.currentlyLoading[e]},async scrapeDirectory(e){return at(this.agent.session_id,e)},async checkTaskComplete(e){try{return!!(await rt(this.agent.session_id,e)).output}catch{return!1}},sortFiles(e,t){const i=e.name.toLowerCase(),s=t.name.toLowerCase();return i<s?-1:i>s?1:0}}};var ri=function(){var t=this,i=t._self._c;return t.agent.language==="ironpython"?i("div",[i(ue,{attrs:{prominent:"",type:"error"}},[i(z,{attrs:{align:"center"}},[i(C,{staticClass:"grow"},[t._v(" The File Browser is not yet implemented for this agent language. ")])],1)],1)],1):i("div",[i(Pe,{attrs:{agent:t.agent.session_id,"module-name":t.moduleName,"module-option-defaults":t.moduleOptionDefaults},model:{value:t.executeDialog,callback:function(s){t.executeDialog=s},expression:"executeDialog"}}),t.loading?i(f,{staticClass:"fa-3x fas fa-spinner fa-spin",staticStyle:{width:"50px"}}):t._e(),i(qt,{ref:"treeview",attrs:{dense:"",hoverable:"","open-on-click":"","item-key":"id","load-children":t.debouncedLoadChildren,open:t.open,items:t.tree},on:{"update:open":function(s){t.open=s}},scopedSlots:t._u([{key:"label",fn:function({item:s,open:n}){return[i(v,{staticClass:"text-left",staticStyle:{"margin-left":"-15px",width:"100%"},attrs:{text:""},on:{contextmenu:function(a){return t.show(s,a)}}},[i("div",{staticStyle:{display:"flex","justify-content":"fle -start"}},[s.file?i(f,[t._v(" "+t._s(t.files[s.file]||"mdi-file")+" ")]):i(f,[t._v(" "+t._s(n?"mdi-folder-open":"mdi-folder")+" ")]),i("span",{staticClass:"ml-2"},[t._v(t._s(s.name))])],1)])]}}])}),i(ge,{attrs:{"position-x":t.menuPosition.x,"position-y":t.menuPosition.y,"close-on-content-click":"",absolute:"","offset-y":""},model:{value:t.showMenu,callback:function(s){t.showMenu=s},expression:"showMenu"}},[i(lt,t._l(t.menuItems,function(s){return i(ot,{key:s.id,on:{click:function(n){return t.clickAction(s.id)}}},[i(ht,[t._v(t._s(s.name))])],1)}),1)],1)],1)},li=[],oi=S(ai,ri,li,!1,null,null,null,null);const ze=oi.exports;const hi={props:{agent:{type:Object,required:!0}},data(){return{loading:!1,form:{command:"",literal:!1},commands:[],tooltipText:"This will ensure that aliased commands such as whoami or ps do not execute the built-in agent aliases."}},methods:{async submit(){this.form.command.length<1||(this.loading=!0,this.form.command.trim()==="sysinfo"?await dt(this.agent.session_id):await ct(this.agent.session_id,this.form.command,this.form.literal),this.form.command="",this.loading=!1,this.$snack.success(`Shell Command queued for ${this.agent.name}`))}}};var di=function(){var t=this,i=t._self._c;return i("div",{staticStyle:{padding:"10px"}},[i(B,{ref:"form",staticClass:"form",nativeOn:{submit:function(s){return s.preventDefault(),t.submit.apply(null,arguments)}}},[i(Q,[i(z,[i(C,{attrs:{cols:"8"}},[i("div",{staticStyle:{display:"flex"}},[i(ut,{staticClass:"pr-2",attrs:{label:"Literal"},model:{value:t.form.literal,callback:function(s){t.$set(t.form,"literal",s)},expression:"form.literal"}}),i(_e,{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:s}){return[i(f,t._g({staticClass:"pr-2",attrs:{small:""}},s),[t._v(" fa-question-circle ")])]}}])},[i("p",[t._v(t._s(t.tooltipText))])]),i(y,{attrs:{dense:"",outlined:"",label:"Shell Command"},model:{value:t.form.command,callback:function(s){t.$set(t.form,"command",s)},expression:"form.command"}})],1)]),i(C,{attrs:{cols:"4",md:"4"}},[i(v,{attrs:{color:"primary",loading:t.loading,type:"submit"}},[t._v(" Run ")])],1)],1)],1)],1)],1)},ci=[],ui=S(hi,di,ci,!1,null,"bac1b187",null,null);const Ae=ui.exports,pi={props:{value:Boolean,loading:{type:Boolean,default:!1}},data(){return{pathToFile:"",rules:{pathToFile:[e=>!!e||"PathToFile is required"]}}},computed:{show:{get(){return this.value},set(e){this.$emit("input",e)}}},watch:{value(e){e===!1&&this.$refs.form.reset()}},methods:{async submit(){!this.$refs.form.validate()||this.$emit("submit",{pathToFile:this.pathToFile})}}};var mi=function(){var t=this,i=t._self._c;return i(Z,{ref:"downloadDialog",attrs:{"max-width":"500px"},model:{value:t.show,callback:function(s){t.show=s},expression:"show"}},[i($,[i(J,[i("span",{staticClass:"headline"},[t._v("Download")])]),i(L,[i(B,{ref:"form",on:{submit:function(s){s.preventDefault()}}},[i(Q,[i(z,[i(C,{attrs:{cols:"12"}},[i(y,{attrs:{label:"path/to/file",rules:t.rules.pathToFile,outlined:"",dense:"",required:""},model:{value:t.pathToFile,callback:function(s){t.pathToFile=s},expression:"pathToFile"}})],1)],1)],1)],1)],1),i(X,[i(P),i(v,{attrs:{color:"blue darken-1",text:""},on:{click:function(s){s.stopPropagation(),t.show=!1}}},[t._v(" Close ")]),i(v,{attrs:{color:"blue darken-1",text:"",loading:t.loading},on:{click:t.submit}},[t._v(" Save ")])],1)],1)],1)},fi=[],gi=S(pi,mi,fi,!1,null,null,null,null);const Me=gi.exports,F=1048576,vi={props:{value:Boolean,language:{type:String,default:""},loading:{type:Boolean,default:!1},pathToFile:{type:String,default:""}},data(){return{uploadType:"uploadnew",isLoading:!1,descriptionLimit:80,selectedDownload:{},search:null,entries:[],internalPathToFile:this.pathToFile,file:null,rules:{pathToFile:[e=>!!e||"PathToFile is required"],fileInput:[e=>!!e||"File required",e=>!!e&&e.size<F||`Maximum size of ${Math.floor(F/1e6)} MiB.`],selectedDownload:[e=>!!e||"File required",e=>!!e&&e.size<F||`Maximum size of ${Math.floor(F/1e6)} MiB.`]}}},computed:{show:{get(){return this.value},set(e){this.$emit("input",e)}},fileName(){return this.file?this.file.name:""},items(){return this.entries.map(e=>{const t=e.location.length>this.descriptionLimit?`(${this.formatBytes(e.size)}) ${e.location.slice(0,this.descriptionLimit)}...`:`(${this.formatBytes(e.size)}) ${e.location}`;return{...e,description:t}})}},watch:{pathToFile(e){this.internalPathToFile=e},value(e){e===!1&&this.$refs.form.reset()},file(e){e&&(this.language==="python"?!this.internalPathToFile||this.internalPathToFile.length===0?this.internalPathToFile=`/tmp/${e.name}`:this.internalPathToFile.endsWith("/")?this.internalPathToFile+=e.name:this.internalPathToFile=`/tmp/${e.name}`:this.language==="powershell"&&(!this.internalPathToFile||this.internalPathToFile.length===0?this.internalPathToFile=`C:\\tmp\\${e.name}`:this.internalPathToFile.endsWith("/")||this.internalPathToFile.endsWith("\\")?this.internalPathToFile+=e.name:this.internalPathToFile=`C:\\tmp\\${e.name}`))},selectedDownload(e){if(e){const{filename:t}=e;this.language==="python"?!this.internalPathToFile||this.internalPathToFile.length===0?this.internalPathToFile=`/tmp/${t}`:this.internalPathToFile.endsWith("/")?this.internalPathToFile+=t:this.internalPathToFile=`/tmp/${t}`:this.language==="powershell"&&(!this.internalPathToFile||this.internalPathToFile.length===0?this.internalPathToFile=`C:\\tmp\\${t}`:this.internalPathToFile.endsWith("/")||this.internalPathToFile.endsWith("\\")?this.internalPathToFile+=t:this.internalPathToFile=`C:\\tmp\\${t}`)}},search(){this.items.length>0||this.isLoading||(this.isLoading=!0,_t({page:1,limit:-1}).then(e=>{const{total:t,records:i}=e;this.count=t,this.entries=i}).catch(e=>{console.log(e)}).finally(()=>{this.isLoading=!1}))}},methods:{async submit(){if(!this.$refs.form.validate())return;let e=null;if(this.uploadType==="uploadnew"){const t=new FormData;t.append("file",this.file),e=(await yt(t)).data.id}else e=this.selectedDownload.id;this.$emit("submit",{file:e,pathToFile:this.internalPathToFile})},formatBytes(e,t){if(e===0)return"0 Bytes";const i=1024,s=t||2,n=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],a=Math.floor(Math.log(e)/Math.log(i));return`${parseFloat((e/i**a).toFixed(s))} ${n[a]}`}}};var _i=function(){var t=this,i=t._self._c;return i(Z,{ref:"uploadDialog",attrs:{"max-width":"750px"},model:{value:t.show,callback:function(s){t.show=s},expression:"show"}},[i($,[i(J,[i("span",{staticClass:"headline"},[t._v("Upload")])]),i(L,[i(B,{ref:"form",attrs:{"on-submit":"return false;"},on:{submit:function(s){s.preventDefault()}}},[i(Q,[i(z,[i(C,{attrs:{cols:"12"}},[i(Yt,{attrs:{mandatory:"",row:""},model:{value:t.uploadType,callback:function(s){t.uploadType=s},expression:"uploadType"}},[i(ne,{attrs:{value:"uploadnew",label:"Upload New File"}}),i(ne,{attrs:{value:"useexisting",label:"Use Existing File"}})],1),t.uploadType==="uploadnew"?i(Vt,{ref:"fileInput",attrs:{accept:"*/*",rules:t.rules.fileInput},model:{value:t.file,callback:function(s){t.file=s},expression:"file"}}):i(me,{attrs:{items:t.items,loading:t.isLoading,"search-input":t.search,rules:t.rules.selectedDownload,"hide-no-data":"","hide-selected":"","cache-items":"","item-text":"description","item-value":"filename",label:"Server Files",placeholder:"Start typing to Search","prepend-icon":"mdi-database-search","return-object":"",outlined:"",dense:""},on:{"update:searchInput":function(s){t.search=s},"update:search-input":function(s){t.search=s}},model:{value:t.selectedDownload,callback:function(s){t.selectedDownload=s},expression:"selectedDownload"}}),i(y,{attrs:{label:"path/to/file (On the agent's machine)",rules:t.rules.pathToFile,outlined:"",dense:"",required:""},model:{value:t.internalPathToFile,callback:function(s){t.internalPathToFile=s},expression:"internalPathToFile"}})],1)],1)],1)],1)],1),i(X,[i(P),i(v,{attrs:{color:"blue darken-1",text:""},on:{click:function(s){s.stopPropagation(),t.show=!1}}},[t._v(" Close ")]),i(v,{attrs:{color:"blue darken-1",text:"",loading:t.loading},on:{click:t.submit}},[t._v(" Save ")])],1)],1)],1)},yi=[],bi=S(vi,_i,yi,!1,null,null,null,null);const Fe=bi.exports;var ki=Object.defineProperty,$i=Object.defineProperties,wi=Object.getOwnPropertyDescriptors,O=Object.getOwnPropertySymbols,Ie=Object.prototype.hasOwnProperty,Ee=Object.prototype.propertyIsEnumerable,re=(e,t,i)=>t in e?ki(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,xi=(e,t)=>{for(var i in t||(t={}))Ie.call(t,i)&&re(e,i,t[i]);if(O)for(var i of O(t))Ee.call(t,i)&&re(e,i,t[i]);return e},Si=(e,t)=>$i(e,wi(t)),Ci=(e,t)=>{var i={};for(var s in e)Ie.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(e!=null&&O)for(var s of O(e))t.indexOf(s)<0&&Ee.call(e,s)&&(i[s]=e[s]);return i};function Oe(e,t,i,s,n,a,r,l){var o=typeof e=="function"?e.options:e;t&&(o.render=t,o.staticRenderFns=i,o._compiled=!0),s&&(o.functional=!0),a&&(o._scopeId="data-v-"+a);var c;if(r?(c=function(b){b=b||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!b&&typeof __VUE_SSR_CONTEXT__<"u"&&(b=__VUE_SSR_CONTEXT__),n&&n.call(this,b),b&&b._registeredComponents&&b._registeredComponents.add(r)},o._ssrRegister=c):n&&(c=l?function(){n.call(this,(o.functional?this.parent:this).$root.$options.shadowRoot)}:n),c)if(o.functional){o._injectStyles=c;var _=o.render;o.render=function(Be,te){return c.call(te),_(Be,te)}}else{var m=o.beforeCreate;o.beforeCreate=m?[].concat(m,c):[c]}return{exports:e,options:o}}const Ti={name:"splitpanes",props:{horizontal:{type:Boolean},pushOtherPanes:{type:Boolean,default:!0},dblClickSplitter:{type:Boolean,default:!0},rtl:{type:Boolean,default:!1},firstSplitter:{type:Boolean}},provide(){return{requestUpdate:this.requestUpdate,onPaneAdd:this.onPaneAdd,onPaneRemove:this.onPaneRemove,onPaneClick:this.onPaneClick}},data:()=>({container:null,ready:!1,panes:[],touch:{mouseDown:!1,dragging:!1,activeSplitter:null},splitterTaps:{splitter:null,timeoutId:null}}),computed:{panesCount(){return this.panes.length},indexedPanes(){return this.panes.reduce((e,t)=>(e[t.id]=t)&&e,{})}},methods:{updatePaneComponents(){this.panes.forEach(e=>{e.update&&e.update({[this.horizontal?"height":"width"]:`${this.indexedPanes[e.id].size}%`})})},bindEvents(){document.addEventListener("mousemove",this.onMouseMove,{passive:!1}),document.addEventListener("mouseup",this.onMouseUp),"ontouchstart"in window&&(document.addEventListener("touchmove",this.onMouseMove,{passive:!1}),document.addEventListener("touchend",this.onMouseUp))},unbindEvents(){document.removeEventListener("mousemove",this.onMouseMove,{passive:!1}),document.removeEventListener("mouseup",this.onMouseUp),"ontouchstart"in window&&(document.removeEventListener("touchmove",this.onMouseMove,{passive:!1}),document.removeEventListener("touchend",this.onMouseUp))},onMouseDown(e,t){this.bindEvents(),this.touch.mouseDown=!0,this.touch.activeSplitter=t},onMouseMove(e){this.touch.mouseDown&&(e.preventDefault(),this.touch.dragging=!0,this.calculatePanesSize(this.getCurrentMouseDrag(e)),this.$emit("resize",this.panes.map(t=>({min:t.min,max:t.max,size:t.size}))))},onMouseUp(){this.touch.dragging&&this.$emit("resized",this.panes.map(e=>({min:e.min,max:e.max,size:e.size}))),this.touch.mouseDown=!1,setTimeout(()=>{this.touch.dragging=!1,this.unbindEvents()},100)},onSplitterClick(e,t){"ontouchstart"in window&&(e.preventDefault(),this.dblClickSplitter&&(this.splitterTaps.splitter===t?(clearTimeout(this.splitterTaps.timeoutId),this.splitterTaps.timeoutId=null,this.onSplitterDblClick(e,t),this.splitterTaps.splitter=null):(this.splitterTaps.splitter=t,this.splitterTaps.timeoutId=setTimeout(()=>{this.splitterTaps.splitter=null},500)))),this.touch.dragging||this.$emit("splitter-click",this.panes[t])},onSplitterDblClick(e,t){let i=0;this.panes=this.panes.map((s,n)=>(s.size=n===t?s.max:s.min,n!==t&&(i+=s.min),s)),this.panes[t].size-=i,this.$emit("pane-maximize",this.panes[t])},onPaneClick(e,t){this.$emit("pane-click",this.indexedPanes[t])},getCurrentMouseDrag(e){const t=this.container.getBoundingClientRect(),{clientX:i,clientY:s}="ontouchstart"in window&&e.touches?e.touches[0]:e;return{x:i-t.left,y:s-t.top}},getCurrentDragPercentage(e){e=e[this.horizontal?"y":"x"];const t=this.container[this.horizontal?"clientHeight":"clientWidth"];return this.rtl&&!this.horizontal&&(e=t-e),e*100/t},calculatePanesSize(e){const t=this.touch.activeSplitter;let i={prevPanesSize:this.sumPrevPanesSize(t),nextPanesSize:this.sumNextPanesSize(t),prevReachedMinPanes:0,nextReachedMinPanes:0};const s=0+(this.pushOtherPanes?0:i.prevPanesSize),n=100-(this.pushOtherPanes?0:i.nextPanesSize),a=Math.max(Math.min(this.getCurrentDragPercentage(e),n),s);let r=[t,t+1],l=this.panes[r[0]]||null,o=this.panes[r[1]]||null;const c=l.max<100&&a>=l.max+i.prevPanesSize,_=o.max<100&&a<=100-(o.max+this.sumNextPanesSize(t+1));if(c||_){c?(l.size=l.max,o.size=Math.max(100-l.max-i.prevPanesSize-i.nextPanesSize,0)):(l.size=Math.max(100-o.max-i.prevPanesSize-this.sumNextPanesSize(t+1),0),o.size=o.max);return}if(this.pushOtherPanes){const m=this.doPushOtherPanes(i,a);if(!m)return;({sums:i,panesToResize:r}=m),l=this.panes[r[0]]||null,o=this.panes[r[1]]||null}l!==null&&(l.size=Math.min(Math.max(a-i.prevPanesSize-i.prevReachedMinPanes,l.min),l.max)),o!==null&&(o.size=Math.min(Math.max(100-a-i.nextPanesSize-i.nextReachedMinPanes,o.min),o.max))},doPushOtherPanes(e,t){const i=this.touch.activeSplitter,s=[i,i+1];return t<e.prevPanesSize+this.panes[s[0]].min&&(s[0]=this.findPrevExpandedPane(i).index,e.prevReachedMinPanes=0,s[0]<i&&this.panes.forEach((n,a)=>{a>s[0]&&a<=i&&(n.size=n.min,e.prevReachedMinPanes+=n.min)}),e.prevPanesSize=this.sumPrevPanesSize(s[0]),s[0]===void 0)?(e.prevReachedMinPanes=0,this.panes[0].size=this.panes[0].min,this.panes.forEach((n,a)=>{a>0&&a<=i&&(n.size=n.min,e.prevReachedMinPanes+=n.min)}),this.panes[s[1]].size=100-e.prevReachedMinPanes-this.panes[0].min-e.prevPanesSize-e.nextPanesSize,null):t>100-e.nextPanesSize-this.panes[s[1]].min&&(s[1]=this.findNextExpandedPane(i).index,e.nextReachedMinPanes=0,s[1]>i+1&&this.panes.forEach((n,a)=>{a>i&&a<s[1]&&(n.size=n.min,e.nextReachedMinPanes+=n.min)}),e.nextPanesSize=this.sumNextPanesSize(s[1]-1),s[1]===void 0)?(e.nextReachedMinPanes=0,this.panes[this.panesCount-1].size=this.panes[this.panesCount-1].min,this.panes.forEach((n,a)=>{a<this.panesCount-1&&a>=i+1&&(n.size=n.min,e.nextReachedMinPanes+=n.min)}),this.panes[s[0]].size=100-e.prevPanesSize-e.nextReachedMinPanes-this.panes[this.panesCount-1].min-e.nextPanesSize,null):{sums:e,panesToResize:s}},sumPrevPanesSize(e){return this.panes.reduce((t,i,s)=>t+(s<e?i.size:0),0)},sumNextPanesSize(e){return this.panes.reduce((t,i,s)=>t+(s>e+1?i.size:0),0)},findPrevExpandedPane(e){return[...this.panes].reverse().find(i=>i.index<e&&i.size>i.min)||{}},findNextExpandedPane(e){return this.panes.find(i=>i.index>e+1&&i.size>i.min)||{}},checkSplitpanesNodes(){Array.from(this.container.children).forEach(t=>{const i=t.classList.contains("splitpanes__pane"),s=t.classList.contains("splitpanes__splitter");if(!i&&!s){t.parentNode.removeChild(t),console.warn("Splitpanes: Only <pane> elements are allowed at the root of <splitpanes>. One of your DOM nodes was removed.");return}})},addSplitter(e,t,i=!1){const s=e-1,n=document.createElement("div");n.classList.add("splitpanes__splitter"),i||(n.onmousedown=a=>this.onMouseDown(a,s),typeof window<"u"&&"ontouchstart"in window&&(n.ontouchstart=a=>this.onMouseDown(a,s)),n.onclick=a=>this.onSplitterClick(a,s+1)),this.dblClickSplitter&&(n.ondblclick=a=>this.onSplitterDblClick(a,s+1)),t.parentNode.insertBefore(n,t)},removeSplitter(e){e.onmousedown=void 0,e.onclick=void 0,e.ondblclick=void 0,e.parentNode.removeChild(e)},redoSplitters(){const e=Array.from(this.container.children);e.forEach(i=>{i.className.includes("splitpanes__splitter")&&this.removeSplitter(i)});let t=0;e.forEach(i=>{i.className.includes("splitpanes__pane")&&(!t&&this.firstSplitter?this.addSplitter(t,i,!0):t&&this.addSplitter(t,i),t++)})},requestUpdate(e){var t=e,{target:i}=t,s=Ci(t,["target"]);const n=this.indexedPanes[i._uid];Object.entries(s).forEach(([a,r])=>n[a]=r)},onPaneAdd(e){let t=-1;Array.from(e.$el.parentNode.children).some(n=>(n.className.includes("splitpanes__pane")&&t++,n===e.$el));const i=parseFloat(e.minSize),s=parseFloat(e.maxSize);this.panes.splice(t,0,{id:e._uid,index:t,min:isNaN(i)?0:i,max:isNaN(s)?100:s,size:e.size===null?null:parseFloat(e.size),givenSize:e.size,update:e.update}),this.panes.forEach((n,a)=>n.index=a),this.ready&&this.$nextTick(()=>{this.redoSplitters(),this.resetPaneSizes({addedPane:this.panes[t]}),this.$emit("pane-add",{index:t,panes:this.panes.map(n=>({min:n.min,max:n.max,size:n.size}))})})},onPaneRemove(e){const t=this.panes.findIndex(s=>s.id===e._uid),i=this.panes.splice(t,1)[0];this.panes.forEach((s,n)=>s.index=n),this.$nextTick(()=>{this.redoSplitters(),this.resetPaneSizes({removedPane:Si(xi({},i),{index:t})}),this.$emit("pane-remove",{removed:i,panes:this.panes.map(s=>({min:s.min,max:s.max,size:s.size}))})})},resetPaneSizes(e={}){!e.addedPane&&!e.removedPane?this.initialPanesSizing():this.panes.some(t=>t.givenSize!==null||t.min||t.max<100)?this.equalizeAfterAddOrRemove(e):this.equalize(),this.ready&&this.$emit("resized",this.panes.map(t=>({min:t.min,max:t.max,size:t.size})))},equalize(){const e=100/this.panesCount;let t=0,i=[],s=[];this.panes.forEach(n=>{n.size=Math.max(Math.min(e,n.max),n.min),t-=n.size,n.size>=n.max&&i.push(n.id),n.size<=n.min&&s.push(n.id)}),t>.1&&this.readjustSizes(t,i,s)},initialPanesSizing(){100/this.panesCount;let e=100,t=[],i=[],s=0;this.panes.forEach(a=>{e-=a.size,a.size!==null&&s++,a.size>=a.max&&t.push(a.id),a.size<=a.min&&i.push(a.id)});let n=100;e>.1&&(this.panes.forEach(a=>{a.size===null&&(a.size=Math.max(Math.min(e/(this.panesCount-s),a.max),a.min)),n-=a.size}),n>.1&&this.readjustSizes(e,t,i))},equalizeAfterAddOrRemove({addedPane:e,removedPane:t}={}){let i=100/this.panesCount,s=0,n=[],a=[];e&&e.givenSize!==null&&(i=(100-e.givenSize)/(this.panesCount-1)),this.panes.forEach(r=>{s-=r.size,r.size>=r.max&&n.push(r.id),r.size<=r.min&&a.push(r.id)}),!(Math.abs(s)<.1)&&(this.panes.forEach(r=>{e&&e.givenSize!==null&&e.id===r.id||(r.size=Math.max(Math.min(i,r.max),r.min)),s-=r.size,r.size>=r.max&&n.push(r.id),r.size<=r.min&&a.push(r.id)}),s>.1&&this.readjustSizes(s,n,a))},readjustSizes(e,t,i){let s;e>0?s=e/(this.panesCount-t.length):s=e/(this.panesCount-i.length),this.panes.forEach((n,a)=>{if(e>0&&!t.includes(n.id)){const r=Math.max(Math.min(n.size+s,n.max),n.min),l=r-n.size;e-=l,n.size=r}else if(!i.includes(n.id)){const r=Math.max(Math.min(n.size+s,n.max),n.min),l=r-n.size;e-=l,n.size=r}n.update({[this.horizontal?"height":"width"]:`${this.indexedPanes[n.id].size}%`})}),Math.abs(e)>.1&&this.$nextTick(()=>{this.ready&&console.warn("Splitpanes: Could not resize panes correctly due to their constraints.")})}},watch:{panes:{deep:!0,immediate:!1,handler(){this.updatePaneComponents()}},horizontal(){this.updatePaneComponents()},firstSplitter(){this.redoSplitters()},dblClickSplitter(e){[...this.container.querySelectorAll(".splitpanes__splitter")].forEach((i,s)=>{i.ondblclick=e?n=>this.onSplitterDblClick(n,s):void 0})}},beforeDestroy(){this.ready=!1},mounted(){this.container=this.$refs.container,this.checkSplitpanesNodes(),this.redoSplitters(),this.resetPaneSizes(),this.$emit("ready"),this.ready=!0},render(e){return e("div",{ref:"container",class:["splitpanes",`splitpanes--${this.horizontal?"horizontal":"vertical"}`,{"splitpanes--dragging":this.touch.dragging}]},this.$slots.default)}};let Di,Pi;const le={};var zi=Oe(Ti,Di,Pi,!1,Ai,null,null,null);function Ai(e){for(let t in le)this[t]=le[t]}var Mi=function(){return zi.exports}(),Fi=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"splitpanes__pane",style:e.style,on:{click:function(s){return e.onPaneClick(s,e._uid)}}},[e._t("default")],2)},Ii=[];const Ei={name:"pane",inject:["requestUpdate","onPaneAdd","onPaneRemove","onPaneClick"],props:{size:{type:[Number,String],default:null},minSize:{type:[Number,String],default:0},maxSize:{type:[Number,String],default:100}},data:()=>({style:{}}),mounted(){this.onPaneAdd(this)},beforeDestroy(){this.onPaneRemove(this)},methods:{update(e){this.style=e}},computed:{sizeNumber(){return this.size||this.size===0?parseFloat(this.size):null},minSizeNumber(){return parseFloat(this.minSize)},maxSizeNumber(){return parseFloat(this.maxSize)}},watch:{sizeNumber(e){this.requestUpdate({target:this,size:e})},minSizeNumber(e){this.requestUpdate({target:this,min:e})},maxSizeNumber(e){this.requestUpdate({target:this,max:e})}}},oe={};var Oi=Oe(Ei,Fi,Ii,!1,Bi,null,null,null);function Bi(e){for(let t in oe)this[t]=oe[t]}var Li=function(){return Oi.exports}();const Vi={name:"AgentEdit",components:{AgentForm:De,AgentInteract:Ae,AgentExecuteModule:V,AgentFileBrowser:ze,AgentTasksList:ve,AgentUploadDialog:Fe,AgentDownloadDialog:Me,TooltipButton:T,TooltipButtonToggle:ye,ErrorStateAlert:pe,Splitpanes:Mi,Pane:Li},data(){return{agent:{},nameLoading:!1,uploadLoading:!1,downloadLoading:!1,nameDialog:!1,uploadDialog:!1,downloadDialog:!1,interval:null,initialized:!0,errorState:!1,paneSize:100,rightPaneInitialized:!1,pathToFile:"",isRefreshTasks:!1}},computed:{breads(){return[{text:"Agents",disabled:this.isChild,to:"/agents",exact:!0},{text:this.breadcrumbName,disabled:!0,to:"/agent-edit"}]},archived(){return this.agent.archived},breadcrumbName(){return this.agent.name||this.id},id(){return this.$route.params.id},isChild(){return!!this.$route.query.hideSideBar},hideSideBar(){return this.$route.query.hideSideBar},tab:{set(e){this.$router.replace({query:{...this.$route.query,tab:e}})},get(){return this.$route.query.tab||"interact"}}},watch:{id(e){e&&this.getAgent(e)},paneSize(e){this.rightPaneInitialized||e<99&&(this.rightPaneInitialized=!0)}},mounted(){this.getAgent(this.$route.params.id)},methods:{toggleCollapsePane(){this.paneSize>95?this.paneSize=50:this.paneSize=100},splitPaneHeight(){return`height: calc(96vh - 104px ${this.isChild?"":"- 36px"})`},popout(){window.open(`${window.location.href}/?hideSideBar=true`,"popup","width=600,height=600"),this.$router.push({name:"agents"})},getAgent(e){pt(e).then(t=>{this.agent=t}).catch(()=>{this.errorState=!0})},async killAgent(){await this.$root.$confirm("Kill Agent",`Do you want to kill agent ${this.agent.name}?`,{color:"red"})&&(this.$store.dispatch("agent/killAgent",{sessionId:this.agent.session_id}),this.$snack.success(`Agent ${this.agent.name} tasked to run TASK_EXIT.`),this.$router.push({name:"agents"}))},async clearQueue(){const t=(await mt(this.agent.session_id,{limit:-1,page:1,status:"queued"})).records.map(i=>i.id);if(t.length===0){this.$snack.info("No queued tasks to clear.");return}await this.$root.$confirm("",`Do you want to clear ${t.length} queued tasks?`,{color:"red"})&&(this.$store.dispatch("agent/clearQueue",{name:this.agent.session_id,tasks:t}),this.$snack.success(`Clearing queued tasks for Agent ${this.agent.session_id}.`))},openUploadDialogPrefilled({pathToFile:e}){this.uploadDialog=!0,this.pathToFile=e},async doUpload({file:e,pathToFile:t}){if(!(this.uploadLoading||e==null||t==null||t.length<1)){this.uploadLoading=!0;try{await ft(this.agent.session_id,e,t),this.$snack.success(`Tasked agent ${this.agent.name} to upload file to ${t}`)}catch(i){this.$snack.error(`Error: ${i}`)}this.uploadLoading=!1,this.uploadDialog=!1}},async doDownload({pathToFile:e}){if(!(this.downloadLoading||e==null||e.length<1)){this.downloadLoading=!0;try{await ce(this.agent.session_id,e),this.$snack.success(`Tasked agent ${this.agent.name} to downloaded file ${e}`)}catch(t){this.$snack.error(`Error: ${t}`)}this.downloadLoading=!1,this.downloadDialog=!1}},scrollResults(){}}};var Ni=function(){var t=this,i=t._self._c;return i("div",[i("div",[i("portal",{attrs:{to:"app-bar-extension"}},[i("div",{staticStyle:{display:"flex","flex-direction":"row",width:"100%"}},[i(bt,{attrs:{"align-with-title":""},model:{value:t.tab,callback:function(s){t.tab=s},expression:"tab"}},[i(A,{key:"interact",attrs:{href:"#interact"}},[t._v(" Interact "),i(f,{staticClass:"ml-1",attrs:{"x-small":""}},[t._v(" fa-terminal ")])],1),i(A,{key:"file-browser",attrs:{href:"#file-browser"}},[t._v(" File Browser "),i(f,{staticClass:"ml-1",attrs:{"x-small":""}},[t._v(" fa-folder-open ")])],1),i(A,{key:"tasks",attrs:{href:"#tasks"}},[t._v(" Tasks "),i(f,{staticClass:"ml-1",attrs:{"x-small":""}},[t._v(" fa-sticky-note ")])],1),i(A,{key:"view",attrs:{href:"#view"}},[t._v(" View "),i(f,{staticClass:"ml-1",attrs:{"x-small":""}},[t._v(" fa-eye ")])],1)],1),i("div",{staticStyle:{display:"flex","flex-direction":"row"}},[t._e()],1)],1)]),i("portal",{attrs:{to:"app-bar"}},[i("div",{staticClass:"v-toolbar__content",staticStyle:{width:"100%"}},[i($t,{attrs:{items:t.breads}}),t.agent.high_integrity===1?i(_e,{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:s}){return[i(f,t._g({attrs:{small:""}},s),[t._v(" fa-user-cog ")])]}}],null,!1,1636569802)},[i("span",[t._v("Elevated Process")])]):t._e(),t.initialized&&t.archived?i(fe,[t._v(" Archived ")]):t._e(),i(P),t.errorState?t._e():i("div",{staticClass:"pt-2",staticStyle:{display:"flex","flex-direction":"row","align-items":"center"}},[i(Fe,{attrs:{language:t.agent.language,loading:t.uploadLoading,"path-to-file":t.pathToFile},on:{submit:t.doUpload},model:{value:t.uploadDialog,callback:function(s){t.uploadDialog=s},expression:"uploadDialog"}}),i(Me,{attrs:{loading:t.downloadLoading},on:{submit:t.doDownload},model:{value:t.downloadDialog,callback:function(s){t.downloadDialog=s},expression:"downloadDialog"}}),t.initialized&&!t.archived?i(ye,{attrs:{icon:"fa-redo","button-text":t.isRefreshTasks?"On":"Off",text:"Auto-refresh tasks"},model:{value:t.isRefreshTasks,callback:function(s){t.isRefreshTasks=s},expression:"isRefreshTasks"}}):t._e(),t.initialized&&!t.archived?i(T,{attrs:{icon:"fa-calendar-times",text:"Clear Queued Tasks"},on:{click:t.clearQueue}}):t._e(),t.initialized&&!t.archived?i(T,{attrs:{icon:"fa-upload",text:"Upload"},on:{click:function(s){t.uploadDialog=!0}}}):t._e(),t.initialized&&!t.archived?i(T,{attrs:{icon:"fa-download",text:"Download"},on:{click:function(s){t.downloadDialog=!0}}}):t._e(),t.hideSideBar?t._e():i(T,{attrs:{icon:"fa-external-link-alt",text:"Popout"},on:{click:t.popout}}),t.initialized&&!t.archived?i(T,{attrs:{icon:"fa-trash-alt",text:"Kill Agent",color:"error"},on:{click:t.killAgent}}):t._e()],1)],1)]),t.errorState?i(pe,{attrs:{"resource-id":t.id,"resource-type":"agent"}}):t._e(),t.errorState?t._e():i("div",{style:t.splitPaneHeight()},[i("splitpanes",{attrs:{disabled:!0},on:{resize:function(s){t.paneSize=s[0].size}}},[i("pane",{attrs:{"min-size":"30",size:t.paneSize}},[i(kt,{staticClass:"scrollable-pane",model:{value:t.tab,callback:function(s){t.tab=s},expression:"tab"}},[i(M,{key:"interact",attrs:{value:"interact",transition:!1,"reverse-transition":!1}},[t.initialized&&!t.archived?i($,{attrs:{flat:""}},[i(Ae,{attrs:{agent:t.agent}}),i(gt),i("h4",{staticClass:"pl-4 pt-2"},[t._v(" Execute Module ")]),i(V,{attrs:{agents:[t.agent.session_id]}})],1):t.initialized&&t.archived?i($,{attrs:{flat:""}},[i(L,[i(ue,{attrs:{type:"error",icon:"fa-exclamation-triangle",value:!0}},[t._v(" This agent is archived. ")])],1)],1):t._e()],1),i(M,{key:"browser",attrs:{value:"file-browser",transition:!1,"reverse-transition":!1}},[i($,{attrs:{flat:""}},[i(ze,{attrs:{agent:t.agent,"read-only":t.initialized&&t.archived},on:{openUploadDialog:t.openUploadDialogPrefilled}})],1)],1),i(M,{key:"tasks",attrs:{value:"tasks",transition:!1,"reverse-transition":!1}},[i($,{attrs:{flat:""}},[i(ve,{attrs:{agent:t.agent,"refresh-tasks":t.isRefreshTasks}})],1)],1),i(M,{key:"view",attrs:{value:"view",transition:!1,"reverse-transition":!1}},[i($,{attrs:{flat:""}},[i(De,{attrs:{"read-only":t.initialized&&t.archived,agent:t.agent}})],1)],1)],1)],1)],1)],1)],1)])},Yi=[],Ri=S(Vi,Ni,Yi,!1,null,null,null,null);const us=Ri.exports;export{us as default};
