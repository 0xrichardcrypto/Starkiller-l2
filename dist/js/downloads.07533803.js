(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["downloads"],{"828a":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("portal",{attrs:{to:"app-bar"}},[a("div",{staticClass:"v-toolbar__content",staticStyle:{width:"100%"}},[a("v-breadcrumbs",{attrs:{items:e.breads}}),a("v-spacer"),e._t("extra-stuff"),a("div",[e.showDelete?a("v-btn",{staticClass:"mr-2",attrs:{color:"error",text:""},on:{click:function(t){return e.$emit("delete")}}},[e._v(" "+e._s(e.deleteText)+" "),a("v-icon",{attrs:{right:""}},[e._v(" fa-trash-alt ")])],1):e._e(),e.showRefresh?a("v-btn",{staticClass:"mr-2",attrs:{disabled:e.refreshLoading,color:"primary",text:""},on:{click:function(t){return e.$emit("refresh")}}},[e._v(" "+e._s(e.refreshText)+" "),a("v-icon",{attrs:{right:""}},[e._v(" fa-redo "+e._s(e.refreshLoading?"fa-spin":"")+" ")])],1):e._e(),e.showCreate?a("v-btn",{staticClass:"mr-2",attrs:{color:"primary",rounded:""},on:{click:function(t){return e.$emit("create")}}},[e._v(" "+e._s(e.createText)+" "),a("v-icon",{attrs:{right:""}},[e._v(" fa-plus-square ")])],1):e._e()],1)],2)])},r=[],o={name:"ListPageTop",props:{deleteText:{type:String,default:"Delete"},refreshText:{type:String,default:"Refresh"},createText:{type:String,default:"Create"},showDelete:{type:Boolean,default:!1},showRefresh:{type:Boolean,default:!1},showCreate:{type:Boolean,default:!1},refreshLoading:{type:Boolean,default:!1},breads:{type:Array,default:function(){return[]}}}},s=o,i=a("2877"),l=a("6544"),c=a.n(l),u=a("2bc5"),d=a("8336"),f=a("132d"),p=a("2fa4"),m=Object(i["a"])(s,n,r,!1,null,null,null);t["a"]=m.exports;c()(m,{VBreadcrumbs:u["a"],VBtn:d["a"],VIcon:f["a"],VSpacer:p["a"]})},9442:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[a("v-btn",e._g({staticClass:"mr-5",attrs:{color:e.flat?"":e.color,to:e.to,icon:"",small:!e.xSmall,"x-small":e.xSmall},on:{click:function(t){return e.$emit("click")}}},n),[a("v-icon",{style:0!==e.padLeft?"padding-left: "+e.padLeft+"px":""},[e._v(" "+e._s(e.icon)+" ")])],1)]}}])},[a("span",[e._v(e._s(e.text))])])},r=[],o=(a("a9e3"),{name:"TooltipButton",props:{icon:{type:String,required:!0},text:{type:String,required:!0},padLeft:{type:Number,default:0},color:{type:String,default:""},flat:{type:Boolean,default:!1},to:{type:Object,default:null},xSmall:{type:Boolean,default:!1}}}),s=o,i=a("2877"),l=a("6544"),c=a.n(l),u=a("8336"),d=a("132d"),f=a("3a2f"),p=Object(i["a"])(s,n,r,!1,null,null,null);t["a"]=p.exports;c()(p,{VBtn:u["a"],VIcon:d["a"],VTooltip:f["a"]})},"9d26e":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("list-page-top",{attrs:{breads:e.breads,"show-create":!1,"show-refresh":!0,"show-delete":!1},on:{refresh:e.refreshDownloads}},[a("template",{slot:"extra-stuff"},[a("v-text-field",{staticStyle:{"max-width":"500px","padding-top":"25px","padding-right":"20px"},attrs:{"append-icon":"mdi-magnify",outlined:"",dense:"",label:"Search"},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}}),a("tooltip-button",{attrs:{icon:"fa-upload",text:"Upload"},on:{click:e.handleFileImport}}),a("input",{ref:"uploader",staticClass:"d-none",attrs:{type:"file"},on:{change:e.onFileChanged}})],1)],2),a("div",{staticStyle:{display:"flex","flix-direction":"row"}},[a("v-card",{staticClass:"mr-2 pa-2",staticStyle:{width:"300px"}},[a("v-expansion-panels",{staticClass:"mb-6",attrs:{multiple:""}},[a("v-expansion-panel",[a("v-expansion-panel-header",{attrs:{"expand-icon":"mdi-menu-down"}},[e._v(" Source ")]),a("v-expansion-panel-content",[a("v-checkbox",{attrs:{"x-small":"",dense:"",label:"Select All"},model:{value:e.selectedAllSources,callback:function(t){e.selectedAllSources=t},expression:"selectedAllSources"}}),a("v-divider",{staticClass:"pb-4"}),e._l(e.sources,(function(t){return a("v-checkbox",{key:t.value,attrs:{value:t.value,"x-small":"",dense:"",label:t.label},on:{change:e.handleFilterChange},model:{value:e.selectedSources,callback:function(t){e.selectedSources=t},expression:"selectedSources"}})}))],2)],1)],1)],1),a("v-card",{staticStyle:{"flex-grow":"1"}},[a("v-pagination",{attrs:{length:e.totalPages,"total-visible":10},on:{input:e.handlePageChange},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}}),a("v-data-table",{attrs:{headers:e.headers,items:e.items,"item-key":"id","sort-by":e.sortBy,"sort-desc":e.sortDesc,"server-items-length":e.totalItems,"footer-props":{"items-per-page-options":[10,25,50,100]},"items-per-page":e.itemsPerPage,loading:e.loading,page:e.currentPage},on:{"update:itemsPerPage":function(t){e.itemsPerPage=t},"update:items-per-page":function(t){e.itemsPerPage=t},"update:options":e.handleOptionsChange},scopedSlots:e._u([{key:"item.updated_at",fn:function(t){var n=t.item;return[a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("span",e._g({},r),[e._v(e._s(e.moment(n.updated_at).fromNow()))])]}}],null,!0)},[a("span",[e._v(e._s(e.moment(n.updated_at).format("MMM D YYYY, h:mm:ss a")))])])]}},{key:"item.created_at",fn:function(t){var n=t.item;return[a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("span",e._g({},r),[e._v(e._s(e.moment(n.created_at).fromNow()))])]}}],null,!0)},[a("span",[e._v(e._s(e.moment(n.created_at).format("MMM D YYYY, h:mm:ss a")))])])]}},{key:"item.size",fn:function(t){var n=t.item;return[a("span",[e._v(e._s(e.formatBytes(n.size)))])]}},{key:"item.actions",fn:function(t){var n=t.item;return[a("v-menu",{attrs:{"offset-y":""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,r=t.attrs;return[a("v-btn",e._g(e._b({attrs:{text:"",icon:"","x-small":""}},"v-btn",r,!1),n),[a("v-icon",[e._v("fa-ellipsis-v")])],1)]}}],null,!0)},[a("v-list",{staticClass:"ml-2 mr-2"},[a("v-spacer"),a("v-list-item",{attrs:{link:""},on:{click:function(t){return e.downloadFile(n)}}},[a("v-list-item-title",[a("v-icon",[e._v("fa-download")]),e._v(" Download ")],1)],1)],1)],1)]}}])})],1)],1)],1)},r=[],o=a("1da1"),s=(a("96cf"),a("ac1f"),a("841c"),a("d81d"),a("4de4"),a("99af"),a("b680"),a("a993")),i=a("f7fe"),l=a.n(i),c=a("828a"),u=a("c1df"),d=a.n(u),f=a("9442"),p={name:"Downloads",components:{ListPageTop:c["a"],TooltipButton:f["a"]},data:function(){return{moment:d.a,items:[],currentPage:1,totalPages:1,totalItems:0,itemsPerPage:10,sortBy:"updated_at",sortDesc:!0,loading:!1,filter:"",breads:[{text:"Downloads",disabled:!0,href:"/downloads"}],headers:[{text:"Id",value:"id",sortable:!1},{text:"Filename",value:"filename",sortable:!0},{text:"Location",value:"location",sortable:!0},{text:"Size",value:"size",sortable:!0},{text:"Created At",value:"created_at",sortable:!0},{text:"Updated At",value:"updated_at",sortable:!0},{text:"Actions",value:"actions",sortable:!1}],isSelecting:!1,selectedFile:null,selectedSources:[],sources:[{label:"Upload",value:"upload"},{label:"Agent Task",value:"agent_task"},{label:"Agent File",value:"agent_file"},{label:"Stager",value:"stager"}],debouncedSearch:l()(this.search,500)}},computed:{selectedAllSources:{set:function(e){this.selectedSources=e?this.sources.map((function(e){return e.value})):[],this.search()},get:function(){return this.selectedSources.length===this.sources.length}}},watch:{filter:function(e){this.debouncedSearch()}},mounted:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.selectedSources=e.sources.map((function(e){return e.value})),e.search();case 2:case"end":return t.stop()}}),t)})))()},methods:{search:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,s["e"]({page:e.currentPage,limit:e.itemsPerPage,query:e.filter,sources:e.selectedSources,sortBy:e.sortBy,sortOrder:e.sortDesc?"desc":"asc"});case 3:a=t.sent,e.items=a.records,e.currentPage=a.page,e.totalPages=a.total_pages,e.totalItems=a.total,e.loading=!1;case 9:case"end":return t.stop()}}),t)})))()},downloadFile:function(e){s["b"](e.id)},refreshDownloads:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.search();case 1:case"end":return t.stop()}}),t)})))()},handleFileImport:function(){var e=this;this.isSelecting=!0,window.addEventListener("focus",(function(){e.isSelecting=!1}),{once:!0}),this.$refs.uploader.click()},onFileChanged:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.selectedFile=e.target.files[0],n=new FormData,n.append("file",t.selectedFile),a.next=5,s["a"](n);case 5:t.$snack.success("Upload complete"),t.debouncedSearch();case 7:case"end":return a.stop()}}),a)})))()},handleFilterChange:function(){this.debouncedSearch()},handlePageChange:function(e){this.currentPage=e,this.debouncedSearch()},handleOptionsChange:function(e){this.currentPage=e.page,this.itemsPerPage=e.itemsPerPage,e.sortBy.length>0?(this.sortBy=e.sortBy[0],this.sortDesc=e.sortDesc[0]):(this.sortBy="updated_at",this.sortDesc=!0),this.debouncedSearch()},formatBytes:function(e,t){if(0===e)return"0 Bytes";var a=1024,n=t||2,r=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],o=Math.floor(Math.log(e)/Math.log(a));return"".concat(parseFloat((e/Math.pow(a,o)).toFixed(n))," ").concat(r[o])}}},m=p,v=a("2877"),h=a("6544"),g=a.n(h),b=a("8336"),x=a("b0af"),y=a("ac7c"),_=a("8fea"),w=a("ce7e"),S=a("cd55"),P=a("49e2"),k=a("c865"),B=a("0393"),C=a("132d"),V=a("8860"),T=a("da13"),D=a("5d23"),j=a("e449"),F=a("891e"),O=a("2fa4"),M=a("8654"),L=a("3a2f"),$=Object(v["a"])(m,n,r,!1,null,null,null);t["default"]=$.exports;g()($,{VBtn:b["a"],VCard:x["a"],VCheckbox:y["a"],VDataTable:_["a"],VDivider:w["a"],VExpansionPanel:S["a"],VExpansionPanelContent:P["a"],VExpansionPanelHeader:k["a"],VExpansionPanels:B["a"],VIcon:C["a"],VList:V["a"],VListItem:T["a"],VListItemTitle:D["c"],VMenu:j["a"],VPagination:F["a"],VSpacer:O["a"],VTextField:M["a"],VTooltip:L["a"]})},f7fe:function(e,t,a){(function(t){var a="Expected a function",n=NaN,r="[object Symbol]",o=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt,u="object"==typeof t&&t&&t.Object===Object&&t,d="object"==typeof self&&self&&self.Object===Object&&self,f=u||d||Function("return this")(),p=Object.prototype,m=p.toString,v=Math.max,h=Math.min,g=function(){return f.Date.now()};function b(e,t,n){var r,o,s,i,l,c,u=0,d=!1,f=!1,p=!0;if("function"!=typeof e)throw new TypeError(a);function m(t){var a=r,n=o;return r=o=void 0,u=t,i=e.apply(n,a),i}function b(e){return u=e,l=setTimeout(S,t),d?m(e):i}function y(e){var a=e-c,n=e-u,r=t-a;return f?h(r,s-n):r}function _(e){var a=e-c,n=e-u;return void 0===c||a>=t||a<0||f&&n>=s}function S(){var e=g();if(_(e))return P(e);l=setTimeout(S,y(e))}function P(e){return l=void 0,p&&r?m(e):(r=o=void 0,i)}function k(){void 0!==l&&clearTimeout(l),u=0,r=c=o=l=void 0}function B(){return void 0===l?i:P(g())}function C(){var e=g(),a=_(e);if(r=arguments,o=this,c=e,a){if(void 0===l)return b(c);if(f)return l=setTimeout(S,t),m(c)}return void 0===l&&(l=setTimeout(S,t)),i}return t=w(t)||0,x(n)&&(d=!!n.leading,f="maxWait"in n,s=f?v(w(n.maxWait)||0,t):s,p="trailing"in n?!!n.trailing:p),C.cancel=k,C.flush=B,C}function x(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function y(e){return!!e&&"object"==typeof e}function _(e){return"symbol"==typeof e||y(e)&&m.call(e)==r}function w(e){if("number"==typeof e)return e;if(_(e))return n;if(x(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=x(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(o,"");var a=i.test(e);return a||l.test(e)?c(e.slice(2),a?2:8):s.test(e)?n:+e}e.exports=b}).call(this,a("c8ba"))}}]);
//# sourceMappingURL=downloads.07533803.js.map