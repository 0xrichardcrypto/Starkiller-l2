{"version":3,"sources":["webpack:///./src/views/MalleableProfileEdit.vue?9e23","webpack:///src/views/MalleableProfileEdit.vue","webpack:///./src/views/MalleableProfileEdit.vue?4d2e","webpack:///./src/views/MalleableProfileEdit.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","breads","canEdit","loading","copyLink","on","submit","deleteMalleableProfile","staticClass","_v","_s","mode","id","staticStyle","ref","nativeOn","$event","preventDefault","apply","arguments","model","value","callback","$$v","valid","expression","rules","isNew","form","$set","staticRenderFns","name","components","ErrorStateAlert","EditPageTop","data","category","code","profile","errorState","computed","$route","isCopy","params","copy","mounted","getMalleableProfile","methods","create","update","component","VCard","VForm","VTextField","VTextarea"],"mappings":"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","file":"js/malleable-profile-edit.fab82c23.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('edit-page-top',{attrs:{\"breads\":_vm.breads,\"show-submit\":true,\"show-copy\":true,\"show-delete\":!_vm.canEdit,\"submit-loading\":_vm.loading,\"copy-link\":_vm.copyLink},on:{\"submit\":_vm.submit,\"delete\":_vm.deleteMalleableProfile}}),_c('div',{staticClass:\"headers\"},[_c('h3',[_vm._v(_vm._s(_vm.mode)+\" Malleable Profile\")])]),(_vm.errorState)?_c('error-state-alert',{attrs:{\"resource-id\":_vm.id,\"resource-type\":\"malleableProfile\"}}):_c('v-card',{staticStyle:{\"padding\":\"10px\"}},[_c('v-form',{ref:\"form\",staticStyle:{\"max-width\":\"500px\"},nativeOn:{\"submit\":function($event){$event.preventDefault();return _vm.submit.apply(null, arguments)}},model:{value:(_vm.valid),callback:function ($$v) {_vm.valid=$$v},expression:\"valid\"}},[_c('v-text-field',{attrs:{\"rules\":_vm.rules['name'],\"label\":\"name\",\"outlined\":\"\",\"dense\":\"\",\"required\":\"\",\"disabled\":!_vm.isNew},model:{value:(_vm.form.name),callback:function ($$v) {_vm.$set(_vm.form, \"name\", $$v)},expression:\"form.name\"}}),_c('v-text-field',{attrs:{\"rules\":_vm.rules['category'],\"label\":\"category\",\"outlined\":\"\",\"dense\":\"\",\"required\":\"\",\"disabled\":!_vm.isNew},model:{value:(_vm.form.category),callback:function ($$v) {_vm.$set(_vm.form, \"category\", $$v)},expression:\"form.category\"}}),_c('v-textarea',{attrs:{\"rules\":_vm.rules['code'],\"label\":\"code\",\"outlined\":\"\",\"dense\":\"\",\"required\":\"\",\"auto-grow\":\"\"},model:{value:(_vm.form.data),callback:function ($$v) {_vm.$set(_vm.form, \"data\", $$v)},expression:\"form.data\"}})],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <edit-page-top\n      :breads=\"breads\"\n      :show-submit=\"true\"\n      :show-copy=\"true\"\n      :show-delete=\"!canEdit\"\n      :submit-loading=\"loading\"\n      :copy-link=\"copyLink\"\n      @submit=\"submit\"\n      @delete=\"deleteMalleableProfile\"\n    />\n    <div class=\"headers\">\n      <h3>{{ mode }} Malleable Profile</h3>\n    </div>\n    <error-state-alert\n      v-if=\"errorState\"\n      :resource-id=\"id\"\n      resource-type=\"malleableProfile\"\n    />\n    <v-card\n      v-else\n      style=\"padding: 10px\"\n    >\n      <v-form\n        ref=\"form\"\n        v-model=\"valid\"\n        style=\"max-width: 500px\"\n        @submit.prevent.native=\"submit\"\n      >\n        <v-text-field\n          v-model=\"form.name\"\n          :rules=\"rules['name']\"\n          label=\"name\"\n          outlined\n          dense\n          required\n          :disabled=\"!isNew\"\n        />\n        <v-text-field\n          v-model=\"form.category\"\n          :rules=\"rules['category']\"\n          label=\"category\"\n          outlined\n          dense\n          required\n          :disabled=\"!isNew\"\n        />\n        <v-textarea\n          v-model=\"form.data\"\n          :rules=\"rules['code']\"\n          label=\"code\"\n          outlined\n          dense\n          required\n          auto-grow\n        />\n      </v-form>\n    </v-card>\n  </div>\n</template>\n\n<script>\nimport Vue from 'vue';\nimport ErrorStateAlert from '@/components/ErrorStateAlert.vue';\nimport EditPageTop from '@/components/EditPageTop.vue';\nimport * as malleableApi from '@/api/malleable-api';\n\nexport default {\n  name: 'MalleableProfileEdit',\n  components: {\n    ErrorStateAlert,\n    EditPageTop,\n  },\n  data() {\n    return {\n      form: {},\n      rules: {\n        name: [\n          (v) => !!v || 'Name is required',\n          (v) => (!!v && v.length > 3) || 'Name must be larger than 3 characters',\n        ],\n        category: [\n          (v) => !!v || 'Category is required',\n        ],\n        code: [\n          (v) => !!v || 'Code is required',\n        ],\n      },\n      profile: {},\n      valid: true,\n      loading: false,\n      errorState: false,\n    };\n  },\n  computed: {\n    breads() {\n      return [\n        {\n          text: 'Malleable Profiles',\n          disabled: false,\n          to: '/malleable-profiles',\n          exact: true,\n        },\n        {\n          text: this.id && !this.isCopy ? `${this.id}` : 'New',\n          disabled: true,\n          to: '/malleable-profiles-edit',\n        },\n      ];\n    },\n    isNew() {\n      return this.$route.name === 'malleableProfileNew';\n    },\n    isCopy() {\n      return this.$route.params.copy === true;\n    },\n    mode() {\n      if (this.isCopy) return 'Copy';\n      if (this.isNew) return 'New';\n      return 'View';\n    },\n    canEdit() {\n      return this.isNew;\n    },\n    id() {\n      return this.$route.params.id;\n    },\n    copyLink() {\n      if (!this.canEdit) return { name: 'malleableProfileNew', params: { copy: true, id: this.id } };\n      return {};\n    },\n  },\n  mounted() {\n    if (!this.isNew || this.isCopy) {\n      this.getMalleableProfile(this.id);\n    }\n  },\n  methods: {\n    async submit() {\n      if (this.loading || !this.$refs.form.validate()) {\n        return;\n      }\n\n      this.loading = true;\n      if (this.isNew) {\n        await this.create();\n      } else {\n        await this.update();\n      }\n      this.loading = false;\n    },\n    create() {\n      return malleableApi.createMalleableProfile(this.form.name, this.form.category, this.form.data)\n        .then(() => this.$router.push({ name: 'malleableProfileEdit', params: { id: this.form.name } }))\n        .catch((err) => this.$snack.error(`Error: ${err}`));\n    },\n    update() {\n      return malleableApi.updateMalleableProfile(this.form.name, this.form.data)\n        .then(() => this.$router.push({ name: 'malleableProfiles' }))\n        .catch((err) => this.$snack.error(`Error: ${err}`));\n    },\n    getMalleableProfile(id) {\n      malleableApi.getMalleableProfile(id)\n        .then((data) => {\n          this.malleableProfile = data;\n          Vue.set(this, 'form', { ...data });\n        })\n        .catch(() => {\n          this.errorState = true;\n        });\n    },\n    async deleteMalleableProfile() {\n      if (await this.$root.$confirm('Delete', `Are you sure you want to delete profile ${this.form.name}?`, { color: 'red' })) {\n        try {\n          await this.$store.dispatch('malleable/deleteMalleableProfile', this.form.name);\n          this.$router.push({ name: 'malleableProfiles' });\n        } catch (err) {\n          this.$snack.error(`Error: ${err}`);\n        }\n      }\n    },\n  },\n};\n</script>\n\n<style>\n\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MalleableProfileEdit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MalleableProfileEdit.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MalleableProfileEdit.vue?vue&type=template&id=46ee4b0f&\"\nimport script from \"./MalleableProfileEdit.vue?vue&type=script&lang=js&\"\nexport * from \"./MalleableProfileEdit.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VForm } from 'vuetify/lib/components/VForm';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\nimport { VTextarea } from 'vuetify/lib/components/VTextarea';\ninstallComponents(component, {VCard,VForm,VTextField,VTextarea})\n"],"sourceRoot":""}