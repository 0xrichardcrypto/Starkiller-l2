(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["bypass-edit"],{"6e38":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("edit-page-top",{attrs:{breads:e.breads,"show-submit":!0,"show-copy":!0,"show-delete":!e.canEdit,"submit-loading":e.loading,"copy-link":e.copyLink},on:{submit:e.submit,delete:e.deleteBypass}}),r("div",{staticClass:"headers"},[r("h3",[e._v(e._s(e.mode)+" Bypass")])]),e.errorState?r("error-state-alert",{attrs:{"resource-id":e.id,"resource-type":"bypass"}}):r("v-card",{staticStyle:{padding:"10px"}},[r("v-form",{ref:"form",nativeOn:{submit:function(t){return t.preventDefault(),e.submit.apply(null,arguments)}},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[r("v-text-field",{attrs:{rules:e.rules["name"],label:"name",outlined:"",dense:"",required:"",disabled:!e.isNew},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),r("v-textarea",{attrs:{rules:e.rules["code"],label:"code",outlined:"",dense:"",required:"","auto-grow":""},model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)},expression:"form.code"}})],1)],1)],1)},a=[],s=r("5530"),i=r("1da1"),o=(r("96cf"),r("b0c0"),r("2b0e")),c=r("6bbe"),u=r("1dc0"),d=r("a4c7"),l={name:"BypassEdit",components:{ErrorStateAlert:c["a"],EditPageTop:u["a"]},data:function(){return{form:{},rules:{name:[function(e){return!!e||"Name is required"},function(e){return!!e&&e.length>2||"Name must be larger than 2 characters"}],code:[function(e){return!!e||"Code is required"}]},bypass:{},valid:!0,loading:!1,errorState:!1}},computed:{breads:function(){return[{text:"Bypasses",disabled:!1,to:"/bypasses",exact:!0},{text:this.breadcrumbName,disabled:!0,to:"/bypasses-edit"}]},breadcrumbName:function(){return this.isCopy?"New":this.form.name?this.form.name:this.id?this.id:"New"},isNew:function(){return"bypassNew"===this.$route.name},isCopy:function(){return!0===this.$route.params.copy},mode:function(){return this.isCopy?"Copy":this.isNew?"New":"View"},canEdit:function(){return this.isNew},id:function(){return this.$route.params.id},copyLink:function(){return this.canEdit?{}:{name:"bypassNew",params:{copy:!0,id:this.id}}}},watch:{id:function(e){e&&this.getBypass(e)}},mounted:function(){this.isNew&&!this.isCopy||this.getBypass(this.id)},methods:{submit:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.loading&&e.$refs.form.validate()){t.next=2;break}return t.abrupt("return");case 2:if(e.loading=!0,!e.isNew){t.next=8;break}return t.next=6,e.create();case 6:t.next=10;break;case 8:return t.next=10,e.update();case 10:e.loading=!1;case 11:case"end":return t.stop()}}),t)})))()},create:function(){var e=this;return d["a"](this.form.name,this.form.code).then((function(t){console.log(t),e.$router.push({name:"bypassEdit",params:{id:t.id}})})).catch((function(t){return e.$snack.error("Error: ".concat(t))}))},update:function(){var e=this;return d["e"](this.form.id,this.form.name,this.form.code).then((function(){return e.$router.push({name:"bypasses"})})).catch((function(t){return e.$snack.error("Error: ".concat(t))}))},getBypass:function(e){var t=this;d["c"](e).then((function(e){t.bypass=Object(s["a"])({},e),o["default"].set(t,"form",Object(s["a"])({},e))})).catch((function(){t.errorState=!0}))},deleteBypass:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$root.$confirm("Delete","Are you sure you want to delete bypass ".concat(e.form.name,"?"),{color:"red"});case 2:if(!t.sent){t.next=12;break}return t.prev=3,t.next=6,e.$store.dispatch("bypass/deleteBypass",e.form.id);case 6:e.$router.push({name:"bypasses"}),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](3),e.$snack.error("Error: ".concat(t.t0));case 12:case"end":return t.stop()}}),t,null,[[3,9]])})))()}}},m=l,p=r("2877"),f=r("6544"),h=r.n(f),b=r("b0af"),y=r("4bd4"),w=r("8654"),v=r("a844"),x=Object(p["a"])(m,n,a,!1,null,null,null);t["default"]=x.exports;h()(x,{VCard:b["a"],VForm:y["a"],VTextField:w["a"],VTextarea:v["a"]})}}]);
//# sourceMappingURL=bypass-edit.460e335a.js.map