(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["downloads"],{"828a":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("portal",{attrs:{to:"app-bar"}},[a("div",{staticClass:"v-toolbar__content",staticStyle:{width:"100%"}},[a("v-breadcrumbs",{attrs:{items:e.breads}}),a("v-spacer"),e._t("extra-stuff"),a("div",[e.showDelete?a("v-btn",{staticClass:"mr-2",attrs:{color:"error",text:""},on:{click:function(t){return e.$emit("delete")}}},[e._v(" "+e._s(e.deleteText)+" "),a("v-icon",{attrs:{right:""}},[e._v(" fa-trash-alt ")])],1):e._e(),e.showRefresh?a("v-btn",{staticClass:"mr-2",attrs:{disabled:e.refreshLoading,color:"primary",text:""},on:{click:function(t){return e.$emit("refresh")}}},[e._v(" "+e._s(e.refreshText)+" "),a("v-icon",{attrs:{right:""}},[e._v(" fa-redo "+e._s(e.refreshLoading?"fa-spin":"")+" ")])],1):e._e(),e.showCreate?a("v-btn",{staticClass:"mr-2",attrs:{color:"primary",rounded:""},on:{click:function(t){return e.$emit("create")}}},[e._v(" "+e._s(e.createText)+" "),a("v-icon",{attrs:{right:""}},[e._v(" fa-plus-square ")])],1):e._e()],1)],2)])},r=[],s={name:"ListPageTop",props:{deleteText:{type:String,default:"Delete"},refreshText:{type:String,default:"Refresh"},createText:{type:String,default:"Create"},showDelete:{type:Boolean,default:!1},showRefresh:{type:Boolean,default:!1},showCreate:{type:Boolean,default:!1},refreshLoading:{type:Boolean,default:!1},breads:{type:Array,default:function(){return[]}}}},o=s,l=a("2877"),i=a("6544"),c=a.n(i),u=a("2bc5"),d=a("8336"),p=a("132d"),f=a("2fa4"),m=Object(l["a"])(o,n,r,!1,null,null,null);t["a"]=m.exports;c()(m,{VBreadcrumbs:u["a"],VBtn:d["a"],VIcon:p["a"],VSpacer:f["a"]})},9442:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[a("v-btn",e._g({staticClass:"mr-5",attrs:{color:e.flat?"":e.color,to:e.to,icon:"",small:!e.xSmall,"x-small":e.xSmall},on:{click:function(t){return e.$emit("click")}}},n),[a("v-icon",{style:0!==e.padLeft?"padding-left: "+e.padLeft+"px":""},[e._v(" "+e._s(e.icon)+" ")])],1)]}}])},[a("span",[e._v(e._s(e.text))])])},r=[],s=(a("a9e3"),{name:"TooltipButton",props:{icon:{type:String,required:!0},text:{type:String,required:!0},padLeft:{type:Number,default:0},color:{type:String,default:""},flat:{type:Boolean,default:!1},to:{type:Object,default:null},xSmall:{type:Boolean,default:!1}}}),o=s,l=a("2877"),i=a("6544"),c=a.n(i),u=a("8336"),d=a("132d"),p=a("3a2f"),f=Object(l["a"])(o,n,r,!1,null,null,null);t["a"]=f.exports;c()(f,{VBtn:u["a"],VIcon:d["a"],VTooltip:p["a"]})},"9d26e":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("list-page-top",{attrs:{breads:e.breads,"show-create":!1,"show-refresh":!0,"show-delete":!1},on:{refresh:e.refreshDownloads}},[a("template",{slot:"extra-stuff"},[a("v-text-field",{staticStyle:{"max-width":"500px","padding-top":"25px","padding-right":"20px"},attrs:{"append-icon":"mdi-magnify",outlined:"",dense:"",label:"Search"},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}}),a("tooltip-button",{attrs:{icon:"fa-upload",text:"Upload"},on:{click:e.handleFileImport}}),a("input",{ref:"uploader",staticClass:"d-none",attrs:{type:"file"},on:{change:e.onFileChanged}})],1)],2),a("div",{staticStyle:{display:"flex","flix-direction":"row"}},[a("v-card",{staticClass:"mr-2 pa-2",staticStyle:{width:"300px"}},[a("v-expansion-panels",{staticClass:"mb-6",attrs:{multiple:""}},[a("v-expansion-panel",[a("v-expansion-panel-header",{attrs:{"expand-icon":"mdi-menu-down"}},[e._v(" Source ")]),a("v-expansion-panel-content",[a("v-checkbox",{attrs:{"x-small":"",dense:"",label:"Select All"},model:{value:e.selectedAllSources,callback:function(t){e.selectedAllSources=t},expression:"selectedAllSources"}}),a("v-divider",{staticClass:"pb-4"}),e._l(e.sources,(function(t){return a("v-checkbox",{key:t.value,attrs:{value:t.value,"x-small":"",dense:"",label:t.label},on:{change:e.handleFilterChange},model:{value:e.selectedSources,callback:function(t){e.selectedSources=t},expression:"selectedSources"}})}))],2)],1)],1)],1),a("v-card",{staticStyle:{"flex-grow":"1"}},[a("v-pagination",{attrs:{length:e.totalPages,"total-visible":10},on:{input:e.handlePageChange},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}}),a("v-data-table",{attrs:{headers:e.headers,items:e.items,"item-key":"id","sort-by":e.sortBy,"sort-desc":e.sortDesc,"server-items-length":e.totalItems,"footer-props":{"items-per-page-options":[10,25,50,100]},"items-per-page":e.itemsPerPage,loading:e.loading,page:e.currentPage},on:{"update:itemsPerPage":function(t){e.itemsPerPage=t},"update:items-per-page":function(t){e.itemsPerPage=t},"update:options":e.handleOptionsChange},scopedSlots:e._u([{key:"item.updated_at",fn:function(t){var n=t.item;return[a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("span",e._g({},r),[e._v(e._s(e.moment(n.updated_at).fromNow()))])]}}],null,!0)},[a("span",[e._v(e._s(e.moment(n.updated_at).format("MMM D YYYY, h:mm:ss a")))])])]}},{key:"item.created_at",fn:function(t){var n=t.item;return[a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[a("span",e._g({},r),[e._v(e._s(e.moment(n.created_at).fromNow()))])]}}],null,!0)},[a("span",[e._v(e._s(e.moment(n.created_at).format("MMM D YYYY, h:mm:ss a")))])])]}},{key:"item.size",fn:function(t){var n=t.item;return[a("span",[e._v(e._s(e.formatBytes(n.size)))])]}},{key:"item.actions",fn:function(t){var n=t.item;return[a("v-menu",{attrs:{"offset-y":""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,r=t.attrs;return[a("v-btn",e._g(e._b({attrs:{text:"",icon:"","x-small":""}},"v-btn",r,!1),n),[a("v-icon",[e._v("fa-ellipsis-v")])],1)]}}],null,!0)},[a("v-list",{staticClass:"ml-2 mr-2"},[a("v-spacer"),a("v-list-item",{attrs:{link:""},on:{click:function(t){return e.downloadFile(n)}}},[a("v-list-item-title",[a("v-icon",[e._v("fa-download")]),e._v(" Download ")],1)],1)],1)],1)]}}])})],1)],1)],1)},r=[],s=a("1da1"),o=(a("96cf"),a("ac1f"),a("841c"),a("d81d"),a("4de4"),a("99af"),a("b680"),a("a993")),l=a("f7fe"),i=a.n(l),c=a("828a"),u=a("c1df"),d=a.n(u),p=a("9442"),f={name:"Downloads",components:{ListPageTop:c["a"],TooltipButton:p["a"]},data:function(){return{moment:d.a,items:[],currentPage:1,totalPages:1,totalItems:0,itemsPerPage:10,sortBy:"updated_at",sortDesc:!0,loading:!1,filter:"",breads:[{text:"Downloads",disabled:!0,href:"/downloads"}],headers:[{text:"Id",value:"id",sortable:!1},{text:"Filename",value:"filename",sortable:!0},{text:"Location",value:"location",sortable:!0},{text:"Size",value:"size",sortable:!0},{text:"Created At",value:"created_at",sortable:!0},{text:"Updated At",value:"updated_at",sortable:!0},{text:"Actions",value:"actions",sortable:!1}],isSelecting:!1,selectedFile:null,selectedSources:[],sources:[{label:"Upload",value:"upload"},{label:"Agent Task",value:"agent_task"},{label:"Agent File",value:"agent_file"},{label:"Stager",value:"stager"}],debouncedSearch:i()(this.search,500)}},computed:{selectedAllSources:{set:function(e){this.selectedSources=e?this.sources.map((function(e){return e.value})):[],this.search()},get:function(){return this.selectedSources.length===this.sources.length}}},watch:{filter:function(e){this.debouncedSearch()}},mounted:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.selectedSources=e.sources.map((function(e){return e.value})),e.search();case 2:case"end":return t.stop()}}),t)})))()},methods:{search:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,o["e"]({page:e.currentPage,limit:e.itemsPerPage,query:e.filter,sources:e.selectedSources,sortBy:e.sortBy,sortOrder:e.sortDesc?"desc":"asc"});case 3:a=t.sent,e.items=a.records,e.currentPage=a.page,e.totalPages=a.total_pages,e.totalItems=a.total,e.loading=!1;case 9:case"end":return t.stop()}}),t)})))()},downloadFile:function(e){o["b"](e.id)},refreshDownloads:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.search();case 1:case"end":return t.stop()}}),t)})))()},handleFileImport:function(){var e=this;this.isSelecting=!0,window.addEventListener("focus",(function(){e.isSelecting=!1}),{once:!0}),this.$refs.uploader.click()},onFileChanged:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.selectedFile=e.target.files[0],n=new FormData,n.append("file",t.selectedFile),a.next=5,o["a"](n);case 5:t.$snack.success("Upload complete"),t.debouncedSearch();case 7:case"end":return a.stop()}}),a)})))()},handleFilterChange:function(){this.debouncedSearch()},handlePageChange:function(e){this.currentPage=e,this.debouncedSearch()},handleOptionsChange:function(e){this.currentPage=e.page,this.itemsPerPage=e.itemsPerPage,e.sortBy.length>0?(this.sortBy=e.sortBy[0],this.sortDesc=e.sortDesc[0]):(this.sortBy="updated_at",this.sortDesc=!0),this.debouncedSearch()},formatBytes:function(e,t){if(0===e)return"0 Bytes";var a=1024,n=t||2,r=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],s=Math.floor(Math.log(e)/Math.log(a));return"".concat(parseFloat((e/Math.pow(a,s)).toFixed(n))," ").concat(r[s])}}},m=f,h=a("2877"),v=a("6544"),g=a.n(v),b=a("8336"),x=a("b0af"),_=a("ac7c"),y=a("8fea"),w=a("ce7e"),S=a("cd55"),P=a("49e2"),k=a("c865"),B=a("0393"),C=a("132d"),V=a("8860"),D=a("da13"),F=a("5d23"),T=a("e449"),L=a("891e"),M=a("2fa4"),A=a("8654"),I=a("3a2f"),O=Object(h["a"])(m,n,r,!1,null,null,null);t["default"]=O.exports;g()(O,{VBtn:b["a"],VCard:x["a"],VCheckbox:_["a"],VDataTable:y["a"],VDivider:w["a"],VExpansionPanel:S["a"],VExpansionPanelContent:P["a"],VExpansionPanelHeader:k["a"],VExpansionPanels:B["a"],VIcon:C["a"],VList:V["a"],VListItem:D["a"],VListItemTitle:F["c"],VMenu:T["a"],VPagination:L["a"],VSpacer:M["a"],VTextField:A["a"],VTooltip:I["a"]})}}]);
//# sourceMappingURL=downloads.bb4b4b9c.js.map