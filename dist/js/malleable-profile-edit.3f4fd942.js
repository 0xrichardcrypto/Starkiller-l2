(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["malleable-profile-edit"],{b619:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("edit-page-top",{attrs:{breads:e.breads,"show-submit":e.initialLoad,"disable-submit":!e.canEdit&&e.initialLoad,"show-copy":e.id>0&&e.initialLoad,"show-delete":e.id>0&&e.initialLoad,"submit-loading":e.loading&&e.initialLoad,"copy-link":e.copyLink,"small-copy":!0,"small-delete":!0},on:{submit:e.submit,delete:e.deleteMalleableProfile}}),a("div",{staticClass:"headers"},[a("h3",[e._v(e._s(e.mode)+" Malleable Profile")])]),e.errorState?a("error-state-alert",{attrs:{"resource-id":e.id,"resource-type":"malleableProfile"}}):a("v-card",{staticStyle:{padding:"10px"}},[a("v-form",{ref:"form",staticStyle:{"max-width":"500px"},nativeOn:{submit:function(t){return t.preventDefault(),e.submit.apply(null,arguments)}},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-text-field",{attrs:{rules:e.rules["name"],label:"name",outlined:"",dense:"",required:"",disabled:!e.isNew},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),a("v-text-field",{attrs:{rules:e.rules["category"],label:"category",outlined:"",dense:"",required:"",disabled:!e.isNew},model:{value:e.form.category,callback:function(t){e.$set(e.form,"category",t)},expression:"form.category"}}),a("v-textarea",{attrs:{rules:e.rules["code"],label:"code",outlined:"",dense:"",required:"","auto-grow":""},model:{value:e.form.data,callback:function(t){e.$set(e.form,"data",t)},expression:"form.data"}})],1)],1)],1)},i=[],l=a("5530"),n=a("1da1"),o=(a("96cf"),a("b0c0"),a("2b0e")),s=a("6bbe"),c=a("1dc0"),u=a("c916"),d={name:"MalleableProfileEdit",components:{ErrorStateAlert:s["a"],EditPageTop:c["a"]},data:function(){return{form:{},rules:{name:[function(e){return!!e||"Name is required"},function(e){return!!e&&e.length>3||"Name must be larger than 3 characters"}],category:[function(e){return!!e||"Category is required"}],code:[function(e){return!!e||"Code is required"}]},malleableProfile:{},valid:!0,loading:!1,errorState:!1,initialLoad:!1}},computed:{isNew:function(){return"malleableProfileNew"===this.$route.name},isCopy:function(){return!0===this.$route.params.copy},mode:function(){return this.isCopy?"Copy":this.isNew?"New":"View"},canEdit:function(){return!0},id:function(){return this.isCopy?0:this.$route.params.id},copyLink:function(){return this.id>0?{name:"malleableProfileNew",params:{copy:!0,id:this.id}}:{}},breads:function(){return[{text:"Malleable Profiles",disabled:!1,to:"/malleable-profiles",exact:!0},{text:this.breadcrumbName,disabled:!0,to:"/malleable-profiles-edit"}]},breadcrumbName:function(){return this.isCopy?"New":this.malleableProfile.name?this.malleableProfile.name:this.id?this.id:"New"}},watch:{id:function(e){e&&this.getMalleableProfile(e)}},mounted:function(){!this.isNew||this.isCopy?this.getMalleableProfile(this.$route.params.id):this.initialLoad=!0},methods:{submit:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.loading&&e.$refs.form.validate()){t.next=2;break}return t.abrupt("return");case 2:e.loading=!0,e.id>0?u["e"](e.id,e.form.data).then((function(){e.$snack.success("Malleable Profile updated"),e.loading=!1})).catch((function(t){e.$snack.error("Error: ".concat(t)),e.loading=!1})):u["a"](e.form.name,e.form.category,e.form.data).then((function(t){var a=t.id;e.$snack.success("Malleable Profile created"),e.loading=!1,e.$router.push({name:"malleableProfileEdit",params:{id:a}})})).catch((function(t){e.$snack.error("Error: ".concat(t)),e.loading=!1}));case 4:case"end":return t.stop()}}),t)})))()},deleteMalleableProfile:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$root.$confirm("Delete","Are you sure you want to delete profile ".concat(e.form.name,"?"),{color:"red"});case 2:if(!t.sent){t.next=12;break}return t.prev=3,t.next=6,e.$store.dispatch("malleable/deleteMalleableProfile",e.form.name);case 6:e.$router.push({name:"malleableProfiles"}),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](3),e.$snack.error("Error: ".concat(t.t0));case 12:case"end":return t.stop()}}),t,null,[[3,9]])})))()},getMalleableProfile:function(e){var t=this;u["c"](e).then((function(e){t.malleableProfile=e,t.initialLoad=!0,o["default"].set(t,"form",Object(l["a"])({},e))})).catch((function(){t.errorState=!0}))}}},f=d,m=a("2877"),b=a("6544"),p=a.n(b),h=a("b0af"),g=a("4bd4"),w=a("8654"),v=a("a844"),y=Object(m["a"])(f,r,i,!1,null,null,null);t["default"]=y.exports;p()(y,{VCard:h["a"],VForm:g["a"],VTextField:w["a"],VTextarea:v["a"]})}}]);
//# sourceMappingURL=malleable-profile-edit.3f4fd942.js.map